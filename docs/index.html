<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.4.0"/>
    <title>arrange_tmx_files_with_extension API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>




            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Response">Response</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Response.status_code">status_code</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.headers">headers</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.raw">raw</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.url">url</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.encoding">encoding</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.history">history</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.reason">reason</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.cookies">cookies</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.elapsed">elapsed</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.request">request</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.ok">ok</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.is_redirect">is_redirect</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.is_permanent_redirect">is_permanent_redirect</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.next">next</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.apparent_encoding">apparent_encoding</a>
                        </li>
                        <li>
                                <a class="function" href="#Response.iter_content">iter_content</a>
                        </li>
                        <li>
                                <a class="function" href="#Response.iter_lines">iter_lines</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.content">content</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.text">text</a>
                        </li>
                        <li>
                                <a class="function" href="#Response.json">json</a>
                        </li>
                        <li>
                                <a class="variable" href="#Response.links">links</a>
                        </li>
                        <li>
                                <a class="function" href="#Response.raise_for_status">raise_for_status</a>
                        </li>
                        <li>
                                <a class="function" href="#Response.close">close</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#LanguageTags">LanguageTags</a>
            </li>
            <li>
                    <a class="variable" href="#repo">repo</a>
            </li>
            <li>
                    <a class="function" href="#get_locales">get_locales</a>
            </li>
            <li>
                    <a class="function" href="#search_file_in_directories">search_file_in_directories</a>
            </li>
            <li>
                    <a class="function" href="#has_new_version">has_new_version</a>
            </li>
            <li>
                    <a class="function" href="#get_domain">get_domain</a>
            </li>
            <li>
                    <a class="function" href="#delete_file">delete_file</a>
            </li>
            <li>
                    <a class="function" href="#create_dir">create_dir</a>
            </li>
            <li>
                    <a class="function" href="#move_file">move_file</a>
            </li>
            <li>
                    <a class="function" href="#sort_ref_tmx_file_by_domain">sort_ref_tmx_file_by_domain</a>
            </li>
            <li>
                    <a class="function" href="#get_batch_from_filename">get_batch_from_filename</a>
            </li>
            <li>
                    <a class="function" href="#sort_batch_tmx_file_by_batch">sort_batch_tmx_file_by_batch</a>
            </li>
            <li>
                    <a class="function" href="#get_tmx_files">get_tmx_files</a>
            </li>
            <li>
                    <a class="function" href="#get_batch_domains">get_batch_domains</a>
            </li>
            <li>
                    <a class="function" href="#get_mapped_batches">get_mapped_batches</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
arrange_tmx_files_with_extension    </h1>

                
                        <input id="mod-arrange_tmx_files_with_extension-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-arrange_tmx_files_with_extension-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="ch">#!/usr/bin/env python3</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">import</span> <span class="nn">lxml</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="kn">import</span> <span class="nn">re</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="kn">import</span> <span class="nn">fnmatch</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="kn">import</span> <span class="nn">requests</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="kn">from</span> <span class="nn">rich</span> <span class="kn">import</span> <span class="nb">print</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="c1"># type aliases</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="n">Response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Response</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="n">LanguageTags</span> <span class="o">=</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="c1"># unique argument: path to the repo root folder</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="n">repo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="k">def</span> <span class="nf">get_locales</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">    Fetches language tags from an external source.</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">    Returns:</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">        list: A list of dictionaries containing locales in different conventions.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;https://capps.capstan.be/langtags_json.php&#39;</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>    <span class="n">response</span><span class="p">:</span> <span class="n">Response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="k">def</span> <span class="nf">search_file_in_directories</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">folders</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">    Searches for a file in specified directories.</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">    Args:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">        dir_path (str): Path to the directory to search in.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">        folders (list): List of folders to make the search more specific within the directory.</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">        filename (str): Name of the file to search for.</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">    Returns:</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">        bool: True if the file is found, False otherwise.</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>    <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">folders</span><span class="p">:</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>        <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>        <span class="c1"># Iterate through all files and subdirectories in the given directory</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>            <span class="c1"># Check if the filename exists in the current directory</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>            <span class="k">if</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}{</span><span class="n">idle_extension</span><span class="si">}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="k">def</span> <span class="nf">has_new_version</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tmx_domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">    Checks if there is a new version of a trend TMX file, where:</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">    - trend = produced in the previous cycle</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">    - new = produced in the current cycle (based on the trend above)</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">    Args:</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">        file_path (str): Path to the file.</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">        tmx_domain (str): Domain associated with the file.</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">    Returns:</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">        bool: True if a new version exists, False otherwise.</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>    <span class="k">if</span> <span class="n">trend_tag</span> <span class="ow">in</span> <span class="n">filename</span> <span class="ow">and</span> <span class="n">tmx_domain</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="n">new_version_fname</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">trend_tag</span><span class="p">,</span> <span class="n">new_tag</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">)</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>        <span class="n">folders</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tm/auto&quot;</span><span class="p">,</span> <span class="s2">&quot;tm/enforce&quot;</span><span class="p">]</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>        <span class="k">if</span> <span class="n">search_file_in_directories</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span> <span class="n">folders</span><span class="p">,</span> <span class="n">new_version_fname</span><span class="p">):</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="k">def</span> <span class="nf">get_domain</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">    Extracts the domain from a file name.</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">    Args:</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">        file (str): Name of the file.</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">    Returns:</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">        str: Domain extracted from the file name.</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>    <span class="c1"># get file&#39;s basename if it&#39;s a path (linux specific)</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>    <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file</span> <span class="k">else</span> <span class="n">file</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>    <span class="c1"># defines the pattern to match any TMX&#39;s extension (which can be zipped or disabled, or not)</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>    <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;\.tmx(\.zip)?(\.idle)?$&quot;</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>    <span class="c1"># any files starting with PISA_ contain domain-specific translations</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>    <span class="k">if</span> <span class="n">file_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;PISA_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>        <span class="c1"># for tmx files</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>        <span class="n">tentative_domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>        <span class="k">if</span> <span class="n">tentative_domain</span> <span class="ow">in</span> <span class="n">allowed_domains</span><span class="p">[</span><span class="s2">&quot;QQS&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">tentative_domain</span> <span class="ow">in</span> <span class="n">allowed_domains</span><span class="p">[</span><span class="s2">&quot;QQA&quot;</span><span class="p">]:</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>            <span class="c1"># then it&#39;s not the domain, but the actual questionnaire</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>            <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">allowed_domains</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">tentative_domain</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>        <span class="k">return</span> <span class="n">tentative_domain</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>    <span class="c1"># any other files contain FT2025 batch-specific translations</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>        <span class="c1"># for batch folders or batch TMs</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="k">if</span> <span class="s2">&quot;_QQS_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span> <span class="ow">or</span> <span class="s2">&quot;_QQA_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span> <span class="c1"># CBA QQ</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>            <span class="k">return</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>        <span class="k">elif</span> <span class="s2">&quot;_QQSP_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span> <span class="ow">or</span> <span class="s2">&quot;_QQAP_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span> <span class="c1"># PBA QQ</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>            <span class="k">return</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>            <span class="k">return</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># anything else</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="k">def</span> <span class="nf">delete_file</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">    Deletes a file.</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">    Args:</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">        file (str): Path to the file.</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&gt;&gt;&gt; Delete </span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> !!!&quot;</span><span class="p">)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>    <span class="c1"># file = Path(file) if isinstance(file, str) else file # only needed with unlink()</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="c1"># file.unlink()</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> has been successfully deleted.&quot;</span><span class="p">)</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="k">def</span> <span class="nf">create_dir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">    Creates a directory.</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a><span class="sd">    Args:</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">        dir_path (str): Path to the directory.</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>        <span class="n">Path</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>        <span class="c1"># print(f&quot;The folder {dir_path} and any necessary ancestors in the path have been created.&quot;)</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="k">def</span> <span class="nf">move_file</span><span class="p">(</span><span class="n">orig_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="sd">    Renames file, adding or removing the idle extension.</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="sd">    Args:</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="sd">        orig_path (str): Original path of the file.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="sd">        dest_path (str): Destination path.</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&gt;&gt;&gt; Move </span><span class="si">{</span><span class="n">orig_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">dest_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> !!!&quot;</span><span class="p">)</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>    <span class="n">dir_path</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">dest_path</span><span class="p">)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>    <span class="n">create_dir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">orig_path</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">)</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> has been successfully moved.&quot;</span><span class="p">)</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="k">def</span> <span class="nf">sort_ref_tmx_file_by_domain</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">current_domains</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="sd">    Sorts reference TMX files by domain. Reference TMs includes trend and new TMs.</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">    Args:</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">        file_path (str): Path to the TMX file.</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">        current_domains (list): List of current domains.</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>    <span class="c1"># gets the domain of a tmx file, according to different file naming patterns</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>    <span class="n">dirty_tmx_domain</span> <span class="o">=</span> <span class="n">get_domain</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>    <span class="n">tmx_domain</span> <span class="o">=</span> <span class="n">dirty_tmx_domain</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;CGA-&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;New&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;-New&quot;</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>        <span class="k">if</span> <span class="n">has_new_version</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">tmx_domain</span><span class="p">):</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>            <span class="c1"># disable any trend TM if it&#39;s enabled and that has a new version from the current cycle</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>                <span class="n">new_file_path</span> <span class="o">=</span> <span class="n">file_path</span> <span class="o">+</span> <span class="n">idle_extension</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>                <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>        <span class="k">elif</span> <span class="n">tmx_domain</span> <span class="ow">in</span> <span class="n">current_domains</span> <span class="ow">and</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>            <span class="c1"># enables the TM if it&#39;s disabled but matches any of the current domains in the  project</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>            <span class="n">new_file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">)</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>            <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>        <span class="k">elif</span> <span class="n">tmx_domain</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_domains</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>            <span class="c1"># disables the TM if it&#39;s enabled but does not match any of the current domains in the  project</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>            <span class="n">new_file_path</span> <span class="o">=</span> <span class="n">file_path</span> <span class="o">+</span> <span class="n">idle_extension</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>            <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>        <span class="k">elif</span> <span class="n">tmx_domain</span> <span class="ow">in</span> <span class="n">disallowed_domains</span><span class="p">:</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>            <span class="c1"># remove the file for good</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>            <span class="n">delete_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="k">def</span> <span class="nf">get_batch_from_filename</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">    Extracts the batch from a file name.</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">    Args:</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">        file_path (str): Path to the file.</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">    Returns:</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="sd">        str: Batch extracted from the file name.</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>    <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file_path</span> <span class="k">else</span> <span class="n">file_path</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>    <span class="n">basename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">basename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">locales</span><span class="p">):</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>        <span class="c1"># this is a base TM, hence remove language code</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>        <span class="k">return</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>    <span class="k">return</span> <span class="n">basename</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="k">def</span> <span class="nf">sort_batch_tmx_file_by_batch</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">batches</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">    Sorts batch TMX files by batch. </span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">    Input can be:</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">    </span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">    - Batch TMs, which may come from the previous or the next step. </span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">    - Base TMs (used for borrowing), which come from an advanced step in another workflow. </span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">    </span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">    The basename of batch TMs (after removing the extension) is already the batch name. </span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">    The basename of base TMs is a concatenation of the batch name and the locale, so both the </span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">    local and the extension need to be removed.</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">    Args:</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">        file_path (str): Path to the TMX file.</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">        batches (list): List of batches.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>    <span class="n">batch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">get_batch_from_filename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>    <span class="k">if</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span> <span class="ow">and</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>        <span class="c1"># remove penalty</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>        <span class="n">new_file_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">)</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>        <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>    <span class="k">elif</span> <span class="n">batch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">batches</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>        <span class="c1"># add penalty</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>        <span class="n">new_file_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_path</span> <span class="o">+</span> <span class="n">idle_extension</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="k">def</span> <span class="nf">get_tmx_files</span><span class="p">(</span><span class="n">tm_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">origin_dirs</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">    Gets TMX files from specified directories.</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">    Args:</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="sd">        tm_dir (str): Path to the TM directory.</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">        origin_dirs (list): List of directories to search in.</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">    Returns:</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">        list: List of paths to TMX files.</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>    <span class="c1"># finds files inside the TM dir having any of the specified origin folders in the file path</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>    <span class="c1"># &#39;origin&#39; here means where the TM came from, e.g. previous step, previous cycle, another locale, etc.</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>    <span class="n">files</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tm_dir</span><span class="si">}</span><span class="s2">/**/</span><span class="si">{</span><span class="n">origin_dir</span><span class="si">}</span><span class="s2">/*.tmx*&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">origin_dir</span> <span class="ow">in</span> <span class="n">origin_dirs</span><span class="p">]</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>    <span class="c1"># it flattens the list of files before returning it</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">files</span><span class="p">))</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="k">def</span> <span class="nf">get_batch_domains</span><span class="p">(</span><span class="n">batches</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">    Gets domains associated with batches (one domain per batch).</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">    Args:</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="sd">        batches (list): List of batches.</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">    Returns:</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">        list: List of domains associated with the batches.</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>    <span class="c1"># return [get_domain(batch) for batch in batches]</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_domain</span><span class="p">,</span> <span class="n">batches</span><span class="p">))</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="k">def</span> <span class="nf">get_mapped_batches</span><span class="p">(</span><span class="n">root_dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">    Gets mapped batches from repository mappings in the omegat project settings.</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a><span class="sd">    Args:</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a><span class="sd">        root_dir_path (str): Path to the root directory of the project.</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="sd">    Returns:</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">        list: List of mapped batches.</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>    <span class="c1"># extracts the whole content of the project settings file</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>    <span class="n">settings_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir_path</span><span class="p">,</span> <span class="s2">&quot;omegat.project&quot;</span><span class="p">)</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">settings_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>    <span class="n">bs_content</span><span class="p">:</span> <span class="n">BeautifulSoup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;xml&quot;</span><span class="p">)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>    <span class="c1"># extracts the mapping elements where the value of the &#39;local&#39; attribute start with &#39;source&#39;</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>    <span class="n">mappings</span><span class="p">:</span> <span class="n">BeautifulSoup</span><span class="o">.</span><span class="n">element_classes</span> <span class="o">=</span> <span class="n">bs_content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;mapping&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;local&#39;</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^source&quot;</span><span class="p">)})</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>    <span class="c1"># for every mapping, returns the part of the value after &#39;source/&#39;, i.e. the batch name</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>    <span class="k">return</span> <span class="p">[</span><span class="n">mapping</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;local&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">mapping</span> <span class="ow">in</span> <span class="n">mappings</span><span class="p">]</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>    <span class="c1"># domains that should not be used, if accidentally added</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>    <span class="n">disallowed_domains</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;CRT&quot;</span><span class="p">,</span> <span class="s2">&quot;FLQ&quot;</span><span class="p">,</span> <span class="s2">&quot;FNL&quot;</span><span class="p">,</span> <span class="s2">&quot;WBQ&quot;</span><span class="p">]</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>    <span class="c1"># needed domains </span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>    <span class="n">allowed_domains</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>        <span class="s2">&quot;QQS&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;STQ&quot;</span><span class="p">,</span> <span class="s2">&quot;STQ-UH&quot;</span><span class="p">,</span> <span class="s2">&quot;STQ-UO&quot;</span><span class="p">,</span> <span class="s2">&quot;ICQ&quot;</span><span class="p">),</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>        <span class="s2">&quot;QQA&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;SCQ&quot;</span><span class="p">,</span> <span class="s2">&quot;TCQ&quot;</span><span class="p">,</span> <span class="s2">&quot;PAQ&quot;</span><span class="p">),</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>        <span class="s2">&quot;COS&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;MAT&quot;</span><span class="p">,</span> <span class="s2">&quot;REA&quot;</span><span class="p">,</span> <span class="s2">&quot;SCI&quot;</span><span class="p">)</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>    <span class="p">}</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>    <span class="c1"># these tags identify whether the TM is from current or previous cycle</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>    <span class="n">trend_tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MS2022&quot;</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>    <span class="n">new_tag</span><span class="p">:</span> <span class="nb">str</span>   <span class="o">=</span> <span class="s2">&quot;FT2025&quot;</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>    <span class="c1"># path to root level in the repo</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>    <span class="n">root_dir_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">repo</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>    <span class="c1"># path to /tm folder in the repo/project</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>    <span class="n">tm_dir_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir_path</span><span class="p">,</span> <span class="s2">&quot;tm&quot;</span><span class="p">)</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>    <span class="c1"># batches that are mapped in the project settings</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>    <span class="n">batches</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="n">get_mapped_batches</span><span class="p">(</span><span class="n">root_dir_path</span><span class="p">)</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>    <span class="c1"># domains of the currently mapped batches</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>    <span class="n">current_domains</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="n">get_batch_domains</span><span class="p">(</span><span class="n">batches</span><span class="p">)</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>    <span class="c1"># extension we add to TMX files to disable them</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>    <span class="n">idle_extension</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;.idle&quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>    <span class="c1"># list of language tags</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>    <span class="n">locales</span><span class="p">:</span> <span class="n">LanguageTags</span> <span class="o">=</span> <span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;BCP47&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">get_locales</span><span class="p">()]</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>    <span class="c1"># trend TMs from previous cycle (&#39;trend&#39;) and new TMs from current cycle (called &#39;ref&#39;)</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>    <span class="k">for</span> <span class="n">tmx_file</span> <span class="ow">in</span> <span class="n">get_tmx_files</span><span class="p">(</span><span class="n">tm_dir_path</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;trend&quot;</span><span class="p">,</span> <span class="s2">&quot;ref&quot;</span><span class="p">]):</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="n">sort_ref_tmx_file_by_domain</span><span class="p">(</span><span class="n">tmx_file</span><span class="p">,</span> <span class="n">current_domains</span><span class="p">)</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>    <span class="c1"># batch TMs from previous/next steps + base TMs (also organized by batch) from other locales</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>    <span class="k">for</span> <span class="n">tmx_file</span> <span class="ow">in</span> <span class="n">get_tmx_files</span><span class="p">(</span><span class="n">tm_dir_path</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;prev&quot;</span><span class="p">,</span> <span class="s2">&quot;next&quot;</span><span class="p">,</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="s2">&quot;x-base&quot;</span><span class="p">]):</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>        <span class="n">sort_batch_tmx_file_by_batch</span><span class="p">(</span><span class="n">tmx_file</span><span class="p">,</span> <span class="n">batches</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="Response">
                            <input id="Response-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Response</span>:

                <label class="view-source-button" for="Response-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response-642"><a href="#Response-642"><span class="linenos"> 642</span></a><span class="k">class</span> <span class="nc">Response</span><span class="p">:</span>
</span><span id="Response-643"><a href="#Response-643"><span class="linenos"> 643</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The :class:`Response &lt;Response&gt;` object, which contains a</span>
</span><span id="Response-644"><a href="#Response-644"><span class="linenos"> 644</span></a><span class="sd">    server&#39;s response to an HTTP request.</span>
</span><span id="Response-645"><a href="#Response-645"><span class="linenos"> 645</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Response-646"><a href="#Response-646"><span class="linenos"> 646</span></a>
</span><span id="Response-647"><a href="#Response-647"><span class="linenos"> 647</span></a>    <span class="n">__attrs__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Response-648"><a href="#Response-648"><span class="linenos"> 648</span></a>        <span class="s2">&quot;_content&quot;</span><span class="p">,</span>
</span><span id="Response-649"><a href="#Response-649"><span class="linenos"> 649</span></a>        <span class="s2">&quot;status_code&quot;</span><span class="p">,</span>
</span><span id="Response-650"><a href="#Response-650"><span class="linenos"> 650</span></a>        <span class="s2">&quot;headers&quot;</span><span class="p">,</span>
</span><span id="Response-651"><a href="#Response-651"><span class="linenos"> 651</span></a>        <span class="s2">&quot;url&quot;</span><span class="p">,</span>
</span><span id="Response-652"><a href="#Response-652"><span class="linenos"> 652</span></a>        <span class="s2">&quot;history&quot;</span><span class="p">,</span>
</span><span id="Response-653"><a href="#Response-653"><span class="linenos"> 653</span></a>        <span class="s2">&quot;encoding&quot;</span><span class="p">,</span>
</span><span id="Response-654"><a href="#Response-654"><span class="linenos"> 654</span></a>        <span class="s2">&quot;reason&quot;</span><span class="p">,</span>
</span><span id="Response-655"><a href="#Response-655"><span class="linenos"> 655</span></a>        <span class="s2">&quot;cookies&quot;</span><span class="p">,</span>
</span><span id="Response-656"><a href="#Response-656"><span class="linenos"> 656</span></a>        <span class="s2">&quot;elapsed&quot;</span><span class="p">,</span>
</span><span id="Response-657"><a href="#Response-657"><span class="linenos"> 657</span></a>        <span class="s2">&quot;request&quot;</span><span class="p">,</span>
</span><span id="Response-658"><a href="#Response-658"><span class="linenos"> 658</span></a>    <span class="p">]</span>
</span><span id="Response-659"><a href="#Response-659"><span class="linenos"> 659</span></a>
</span><span id="Response-660"><a href="#Response-660"><span class="linenos"> 660</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-661"><a href="#Response-661"><span class="linenos"> 661</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Response-662"><a href="#Response-662"><span class="linenos"> 662</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Response-663"><a href="#Response-663"><span class="linenos"> 663</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_next</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-664"><a href="#Response-664"><span class="linenos"> 664</span></a>
</span><span id="Response-665"><a href="#Response-665"><span class="linenos"> 665</span></a>        <span class="c1">#: Integer Code of responded HTTP Status, e.g. 404 or 200.</span>
</span><span id="Response-666"><a href="#Response-666"><span class="linenos"> 666</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-667"><a href="#Response-667"><span class="linenos"> 667</span></a>
</span><span id="Response-668"><a href="#Response-668"><span class="linenos"> 668</span></a>        <span class="c1">#: Case-insensitive Dictionary of Response Headers.</span>
</span><span id="Response-669"><a href="#Response-669"><span class="linenos"> 669</span></a>        <span class="c1">#: For example, ``headers[&#39;content-encoding&#39;]`` will return the</span>
</span><span id="Response-670"><a href="#Response-670"><span class="linenos"> 670</span></a>        <span class="c1">#: value of a ``&#39;Content-Encoding&#39;`` response header.</span>
</span><span id="Response-671"><a href="#Response-671"><span class="linenos"> 671</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="n">CaseInsensitiveDict</span><span class="p">()</span>
</span><span id="Response-672"><a href="#Response-672"><span class="linenos"> 672</span></a>
</span><span id="Response-673"><a href="#Response-673"><span class="linenos"> 673</span></a>        <span class="c1">#: File-like object representation of response (for advanced usage).</span>
</span><span id="Response-674"><a href="#Response-674"><span class="linenos"> 674</span></a>        <span class="c1">#: Use of ``raw`` requires that ``stream=True`` be set on the request.</span>
</span><span id="Response-675"><a href="#Response-675"><span class="linenos"> 675</span></a>        <span class="c1">#: This requirement does not apply for use internally to Requests.</span>
</span><span id="Response-676"><a href="#Response-676"><span class="linenos"> 676</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-677"><a href="#Response-677"><span class="linenos"> 677</span></a>
</span><span id="Response-678"><a href="#Response-678"><span class="linenos"> 678</span></a>        <span class="c1">#: Final URL location of Response.</span>
</span><span id="Response-679"><a href="#Response-679"><span class="linenos"> 679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-680"><a href="#Response-680"><span class="linenos"> 680</span></a>
</span><span id="Response-681"><a href="#Response-681"><span class="linenos"> 681</span></a>        <span class="c1">#: Encoding to decode with when accessing r.text.</span>
</span><span id="Response-682"><a href="#Response-682"><span class="linenos"> 682</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-683"><a href="#Response-683"><span class="linenos"> 683</span></a>
</span><span id="Response-684"><a href="#Response-684"><span class="linenos"> 684</span></a>        <span class="c1">#: A list of :class:`Response &lt;Response&gt;` objects from</span>
</span><span id="Response-685"><a href="#Response-685"><span class="linenos"> 685</span></a>        <span class="c1">#: the history of the Request. Any redirect responses will end</span>
</span><span id="Response-686"><a href="#Response-686"><span class="linenos"> 686</span></a>        <span class="c1">#: up here. The list is sorted from the oldest to the most recent request.</span>
</span><span id="Response-687"><a href="#Response-687"><span class="linenos"> 687</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Response-688"><a href="#Response-688"><span class="linenos"> 688</span></a>
</span><span id="Response-689"><a href="#Response-689"><span class="linenos"> 689</span></a>        <span class="c1">#: Textual reason of responded HTTP Status, e.g. &quot;Not Found&quot; or &quot;OK&quot;.</span>
</span><span id="Response-690"><a href="#Response-690"><span class="linenos"> 690</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reason</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-691"><a href="#Response-691"><span class="linenos"> 691</span></a>
</span><span id="Response-692"><a href="#Response-692"><span class="linenos"> 692</span></a>        <span class="c1">#: A CookieJar of Cookies the server sent back.</span>
</span><span id="Response-693"><a href="#Response-693"><span class="linenos"> 693</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cookies</span> <span class="o">=</span> <span class="n">cookiejar_from_dict</span><span class="p">({})</span>
</span><span id="Response-694"><a href="#Response-694"><span class="linenos"> 694</span></a>
</span><span id="Response-695"><a href="#Response-695"><span class="linenos"> 695</span></a>        <span class="c1">#: The amount of time elapsed between sending the request</span>
</span><span id="Response-696"><a href="#Response-696"><span class="linenos"> 696</span></a>        <span class="c1">#: and the arrival of the response (as a timedelta).</span>
</span><span id="Response-697"><a href="#Response-697"><span class="linenos"> 697</span></a>        <span class="c1">#: This property specifically measures the time taken between sending</span>
</span><span id="Response-698"><a href="#Response-698"><span class="linenos"> 698</span></a>        <span class="c1">#: the first byte of the request and finishing parsing the headers. It</span>
</span><span id="Response-699"><a href="#Response-699"><span class="linenos"> 699</span></a>        <span class="c1">#: is therefore unaffected by consuming the response content or the</span>
</span><span id="Response-700"><a href="#Response-700"><span class="linenos"> 700</span></a>        <span class="c1">#: value of the ``stream`` keyword argument.</span>
</span><span id="Response-701"><a href="#Response-701"><span class="linenos"> 701</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">elapsed</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Response-702"><a href="#Response-702"><span class="linenos"> 702</span></a>
</span><span id="Response-703"><a href="#Response-703"><span class="linenos"> 703</span></a>        <span class="c1">#: The :class:`PreparedRequest &lt;PreparedRequest&gt;` object to which this</span>
</span><span id="Response-704"><a href="#Response-704"><span class="linenos"> 704</span></a>        <span class="c1">#: is a response.</span>
</span><span id="Response-705"><a href="#Response-705"><span class="linenos"> 705</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-706"><a href="#Response-706"><span class="linenos"> 706</span></a>
</span><span id="Response-707"><a href="#Response-707"><span class="linenos"> 707</span></a>    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-708"><a href="#Response-708"><span class="linenos"> 708</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Response-709"><a href="#Response-709"><span class="linenos"> 709</span></a>
</span><span id="Response-710"><a href="#Response-710"><span class="linenos"> 710</span></a>    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
</span><span id="Response-711"><a href="#Response-711"><span class="linenos"> 711</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Response-712"><a href="#Response-712"><span class="linenos"> 712</span></a>
</span><span id="Response-713"><a href="#Response-713"><span class="linenos"> 713</span></a>    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-714"><a href="#Response-714"><span class="linenos"> 714</span></a>        <span class="c1"># Consume everything; accessing the content attribute makes</span>
</span><span id="Response-715"><a href="#Response-715"><span class="linenos"> 715</span></a>        <span class="c1"># sure the content has been fully read.</span>
</span><span id="Response-716"><a href="#Response-716"><span class="linenos"> 716</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span><span class="p">:</span>
</span><span id="Response-717"><a href="#Response-717"><span class="linenos"> 717</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">content</span>
</span><span id="Response-718"><a href="#Response-718"><span class="linenos"> 718</span></a>
</span><span id="Response-719"><a href="#Response-719"><span class="linenos"> 719</span></a>        <span class="k">return</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrs__</span><span class="p">}</span>
</span><span id="Response-720"><a href="#Response-720"><span class="linenos"> 720</span></a>
</span><span id="Response-721"><a href="#Response-721"><span class="linenos"> 721</span></a>    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
</span><span id="Response-722"><a href="#Response-722"><span class="linenos"> 722</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">state</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Response-723"><a href="#Response-723"><span class="linenos"> 723</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Response-724"><a href="#Response-724"><span class="linenos"> 724</span></a>
</span><span id="Response-725"><a href="#Response-725"><span class="linenos"> 725</span></a>        <span class="c1"># pickled objects do not have .raw</span>
</span><span id="Response-726"><a href="#Response-726"><span class="linenos"> 726</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_content_consumed&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="Response-727"><a href="#Response-727"><span class="linenos"> 727</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Response-728"><a href="#Response-728"><span class="linenos"> 728</span></a>
</span><span id="Response-729"><a href="#Response-729"><span class="linenos"> 729</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-730"><a href="#Response-730"><span class="linenos"> 730</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Response [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">]&gt;&quot;</span>
</span><span id="Response-731"><a href="#Response-731"><span class="linenos"> 731</span></a>
</span><span id="Response-732"><a href="#Response-732"><span class="linenos"> 732</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-733"><a href="#Response-733"><span class="linenos"> 733</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if :attr:`status_code` is less than 400.</span>
</span><span id="Response-734"><a href="#Response-734"><span class="linenos"> 734</span></a>
</span><span id="Response-735"><a href="#Response-735"><span class="linenos"> 735</span></a><span class="sd">        This attribute checks if the status code of the response is between</span>
</span><span id="Response-736"><a href="#Response-736"><span class="linenos"> 736</span></a><span class="sd">        400 and 600 to see if there was a client error or a server error. If</span>
</span><span id="Response-737"><a href="#Response-737"><span class="linenos"> 737</span></a><span class="sd">        the status code, is between 200 and 400, this will return True. This</span>
</span><span id="Response-738"><a href="#Response-738"><span class="linenos"> 738</span></a><span class="sd">        is **not** a check to see if the response code is ``200 OK``.</span>
</span><span id="Response-739"><a href="#Response-739"><span class="linenos"> 739</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-740"><a href="#Response-740"><span class="linenos"> 740</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ok</span>
</span><span id="Response-741"><a href="#Response-741"><span class="linenos"> 741</span></a>
</span><span id="Response-742"><a href="#Response-742"><span class="linenos"> 742</span></a>    <span class="k">def</span> <span class="nf">__nonzero__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-743"><a href="#Response-743"><span class="linenos"> 743</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if :attr:`status_code` is less than 400.</span>
</span><span id="Response-744"><a href="#Response-744"><span class="linenos"> 744</span></a>
</span><span id="Response-745"><a href="#Response-745"><span class="linenos"> 745</span></a><span class="sd">        This attribute checks if the status code of the response is between</span>
</span><span id="Response-746"><a href="#Response-746"><span class="linenos"> 746</span></a><span class="sd">        400 and 600 to see if there was a client error or a server error. If</span>
</span><span id="Response-747"><a href="#Response-747"><span class="linenos"> 747</span></a><span class="sd">        the status code, is between 200 and 400, this will return True. This</span>
</span><span id="Response-748"><a href="#Response-748"><span class="linenos"> 748</span></a><span class="sd">        is **not** a check to see if the response code is ``200 OK``.</span>
</span><span id="Response-749"><a href="#Response-749"><span class="linenos"> 749</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-750"><a href="#Response-750"><span class="linenos"> 750</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ok</span>
</span><span id="Response-751"><a href="#Response-751"><span class="linenos"> 751</span></a>
</span><span id="Response-752"><a href="#Response-752"><span class="linenos"> 752</span></a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-753"><a href="#Response-753"><span class="linenos"> 753</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Allows you to use a response as an iterator.&quot;&quot;&quot;</span>
</span><span id="Response-754"><a href="#Response-754"><span class="linenos"> 754</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
</span><span id="Response-755"><a href="#Response-755"><span class="linenos"> 755</span></a>
</span><span id="Response-756"><a href="#Response-756"><span class="linenos"> 756</span></a>    <span class="nd">@property</span>
</span><span id="Response-757"><a href="#Response-757"><span class="linenos"> 757</span></a>    <span class="k">def</span> <span class="nf">ok</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-758"><a href="#Response-758"><span class="linenos"> 758</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if :attr:`status_code` is less than 400, False if not.</span>
</span><span id="Response-759"><a href="#Response-759"><span class="linenos"> 759</span></a>
</span><span id="Response-760"><a href="#Response-760"><span class="linenos"> 760</span></a><span class="sd">        This attribute checks if the status code of the response is between</span>
</span><span id="Response-761"><a href="#Response-761"><span class="linenos"> 761</span></a><span class="sd">        400 and 600 to see if there was a client error or a server error. If</span>
</span><span id="Response-762"><a href="#Response-762"><span class="linenos"> 762</span></a><span class="sd">        the status code is between 200 and 400, this will return True. This</span>
</span><span id="Response-763"><a href="#Response-763"><span class="linenos"> 763</span></a><span class="sd">        is **not** a check to see if the response code is ``200 OK``.</span>
</span><span id="Response-764"><a href="#Response-764"><span class="linenos"> 764</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-765"><a href="#Response-765"><span class="linenos"> 765</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Response-766"><a href="#Response-766"><span class="linenos"> 766</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span><span id="Response-767"><a href="#Response-767"><span class="linenos"> 767</span></a>        <span class="k">except</span> <span class="n">HTTPError</span><span class="p">:</span>
</span><span id="Response-768"><a href="#Response-768"><span class="linenos"> 768</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Response-769"><a href="#Response-769"><span class="linenos"> 769</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="Response-770"><a href="#Response-770"><span class="linenos"> 770</span></a>
</span><span id="Response-771"><a href="#Response-771"><span class="linenos"> 771</span></a>    <span class="nd">@property</span>
</span><span id="Response-772"><a href="#Response-772"><span class="linenos"> 772</span></a>    <span class="k">def</span> <span class="nf">is_redirect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-773"><a href="#Response-773"><span class="linenos"> 773</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;True if this Response is a well-formed HTTP redirect that could have</span>
</span><span id="Response-774"><a href="#Response-774"><span class="linenos"> 774</span></a><span class="sd">        been processed automatically (by :meth:`Session.resolve_redirects`).</span>
</span><span id="Response-775"><a href="#Response-775"><span class="linenos"> 775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-776"><a href="#Response-776"><span class="linenos"> 776</span></a>        <span class="k">return</span> <span class="s2">&quot;location&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="n">REDIRECT_STATI</span>
</span><span id="Response-777"><a href="#Response-777"><span class="linenos"> 777</span></a>
</span><span id="Response-778"><a href="#Response-778"><span class="linenos"> 778</span></a>    <span class="nd">@property</span>
</span><span id="Response-779"><a href="#Response-779"><span class="linenos"> 779</span></a>    <span class="k">def</span> <span class="nf">is_permanent_redirect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-780"><a href="#Response-780"><span class="linenos"> 780</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;True if this Response one of the permanent versions of redirect.&quot;&quot;&quot;</span>
</span><span id="Response-781"><a href="#Response-781"><span class="linenos"> 781</span></a>        <span class="k">return</span> <span class="s2">&quot;location&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="p">(</span>
</span><span id="Response-782"><a href="#Response-782"><span class="linenos"> 782</span></a>            <span class="n">codes</span><span class="o">.</span><span class="n">moved_permanently</span><span class="p">,</span>
</span><span id="Response-783"><a href="#Response-783"><span class="linenos"> 783</span></a>            <span class="n">codes</span><span class="o">.</span><span class="n">permanent_redirect</span><span class="p">,</span>
</span><span id="Response-784"><a href="#Response-784"><span class="linenos"> 784</span></a>        <span class="p">)</span>
</span><span id="Response-785"><a href="#Response-785"><span class="linenos"> 785</span></a>
</span><span id="Response-786"><a href="#Response-786"><span class="linenos"> 786</span></a>    <span class="nd">@property</span>
</span><span id="Response-787"><a href="#Response-787"><span class="linenos"> 787</span></a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-788"><a href="#Response-788"><span class="linenos"> 788</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a PreparedRequest for the next request in a redirect chain, if there is one.&quot;&quot;&quot;</span>
</span><span id="Response-789"><a href="#Response-789"><span class="linenos"> 789</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next</span>
</span><span id="Response-790"><a href="#Response-790"><span class="linenos"> 790</span></a>
</span><span id="Response-791"><a href="#Response-791"><span class="linenos"> 791</span></a>    <span class="nd">@property</span>
</span><span id="Response-792"><a href="#Response-792"><span class="linenos"> 792</span></a>    <span class="k">def</span> <span class="nf">apparent_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-793"><a href="#Response-793"><span class="linenos"> 793</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The apparent encoding, provided by the charset_normalizer or chardet libraries.&quot;&quot;&quot;</span>
</span><span id="Response-794"><a href="#Response-794"><span class="linenos"> 794</span></a>        <span class="k">return</span> <span class="n">chardet</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)[</span><span class="s2">&quot;encoding&quot;</span><span class="p">]</span>
</span><span id="Response-795"><a href="#Response-795"><span class="linenos"> 795</span></a>
</span><span id="Response-796"><a href="#Response-796"><span class="linenos"> 796</span></a>    <span class="k">def</span> <span class="nf">iter_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">decode_unicode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Response-797"><a href="#Response-797"><span class="linenos"> 797</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterates over the response data.  When stream=True is set on the</span>
</span><span id="Response-798"><a href="#Response-798"><span class="linenos"> 798</span></a><span class="sd">        request, this avoids reading the content at once into memory for</span>
</span><span id="Response-799"><a href="#Response-799"><span class="linenos"> 799</span></a><span class="sd">        large responses.  The chunk size is the number of bytes it should</span>
</span><span id="Response-800"><a href="#Response-800"><span class="linenos"> 800</span></a><span class="sd">        read into memory.  This is not necessarily the length of each item</span>
</span><span id="Response-801"><a href="#Response-801"><span class="linenos"> 801</span></a><span class="sd">        returned as decoding can take place.</span>
</span><span id="Response-802"><a href="#Response-802"><span class="linenos"> 802</span></a>
</span><span id="Response-803"><a href="#Response-803"><span class="linenos"> 803</span></a><span class="sd">        chunk_size must be of type int or None. A value of None will</span>
</span><span id="Response-804"><a href="#Response-804"><span class="linenos"> 804</span></a><span class="sd">        function differently depending on the value of `stream`.</span>
</span><span id="Response-805"><a href="#Response-805"><span class="linenos"> 805</span></a><span class="sd">        stream=True will read data as it arrives in whatever size the</span>
</span><span id="Response-806"><a href="#Response-806"><span class="linenos"> 806</span></a><span class="sd">        chunks are received. If stream=False, data is returned as</span>
</span><span id="Response-807"><a href="#Response-807"><span class="linenos"> 807</span></a><span class="sd">        a single chunk.</span>
</span><span id="Response-808"><a href="#Response-808"><span class="linenos"> 808</span></a>
</span><span id="Response-809"><a href="#Response-809"><span class="linenos"> 809</span></a><span class="sd">        If decode_unicode is True, content will be decoded using the best</span>
</span><span id="Response-810"><a href="#Response-810"><span class="linenos"> 810</span></a><span class="sd">        available encoding based on the response.</span>
</span><span id="Response-811"><a href="#Response-811"><span class="linenos"> 811</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-812"><a href="#Response-812"><span class="linenos"> 812</span></a>
</span><span id="Response-813"><a href="#Response-813"><span class="linenos"> 813</span></a>        <span class="k">def</span> <span class="nf">generate</span><span class="p">():</span>
</span><span id="Response-814"><a href="#Response-814"><span class="linenos"> 814</span></a>            <span class="c1"># Special case for urllib3.</span>
</span><span id="Response-815"><a href="#Response-815"><span class="linenos"> 815</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="s2">&quot;stream&quot;</span><span class="p">):</span>
</span><span id="Response-816"><a href="#Response-816"><span class="linenos"> 816</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Response-817"><a href="#Response-817"><span class="linenos"> 817</span></a>                    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">,</span> <span class="n">decode_content</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Response-818"><a href="#Response-818"><span class="linenos"> 818</span></a>                <span class="k">except</span> <span class="n">ProtocolError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response-819"><a href="#Response-819"><span class="linenos"> 819</span></a>                    <span class="k">raise</span> <span class="n">ChunkedEncodingError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response-820"><a href="#Response-820"><span class="linenos"> 820</span></a>                <span class="k">except</span> <span class="n">DecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response-821"><a href="#Response-821"><span class="linenos"> 821</span></a>                    <span class="k">raise</span> <span class="n">ContentDecodingError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response-822"><a href="#Response-822"><span class="linenos"> 822</span></a>                <span class="k">except</span> <span class="n">ReadTimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response-823"><a href="#Response-823"><span class="linenos"> 823</span></a>                    <span class="k">raise</span> <span class="ne">ConnectionError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response-824"><a href="#Response-824"><span class="linenos"> 824</span></a>                <span class="k">except</span> <span class="n">SSLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response-825"><a href="#Response-825"><span class="linenos"> 825</span></a>                    <span class="k">raise</span> <span class="n">RequestsSSLError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response-826"><a href="#Response-826"><span class="linenos"> 826</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response-827"><a href="#Response-827"><span class="linenos"> 827</span></a>                <span class="c1"># Standard file-like object.</span>
</span><span id="Response-828"><a href="#Response-828"><span class="linenos"> 828</span></a>                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="Response-829"><a href="#Response-829"><span class="linenos"> 829</span></a>                    <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">)</span>
</span><span id="Response-830"><a href="#Response-830"><span class="linenos"> 830</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
</span><span id="Response-831"><a href="#Response-831"><span class="linenos"> 831</span></a>                        <span class="k">break</span>
</span><span id="Response-832"><a href="#Response-832"><span class="linenos"> 832</span></a>                    <span class="k">yield</span> <span class="n">chunk</span>
</span><span id="Response-833"><a href="#Response-833"><span class="linenos"> 833</span></a>
</span><span id="Response-834"><a href="#Response-834"><span class="linenos"> 834</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Response-835"><a href="#Response-835"><span class="linenos"> 835</span></a>
</span><span id="Response-836"><a href="#Response-836"><span class="linenos"> 836</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_content</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="Response-837"><a href="#Response-837"><span class="linenos"> 837</span></a>            <span class="k">raise</span> <span class="n">StreamConsumedError</span><span class="p">()</span>
</span><span id="Response-838"><a href="#Response-838"><span class="linenos"> 838</span></a>        <span class="k">elif</span> <span class="n">chunk_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="Response-839"><a href="#Response-839"><span class="linenos"> 839</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Response-840"><a href="#Response-840"><span class="linenos"> 840</span></a>                <span class="sa">f</span><span class="s2">&quot;chunk_size must be an int, it is instead a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span id="Response-841"><a href="#Response-841"><span class="linenos"> 841</span></a>            <span class="p">)</span>
</span><span id="Response-842"><a href="#Response-842"><span class="linenos"> 842</span></a>        <span class="c1"># simulate reading small chunks of the content</span>
</span><span id="Response-843"><a href="#Response-843"><span class="linenos"> 843</span></a>        <span class="n">reused_chunks</span> <span class="o">=</span> <span class="n">iter_slices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_content</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">)</span>
</span><span id="Response-844"><a href="#Response-844"><span class="linenos"> 844</span></a>
</span><span id="Response-845"><a href="#Response-845"><span class="linenos"> 845</span></a>        <span class="n">stream_chunks</span> <span class="o">=</span> <span class="n">generate</span><span class="p">()</span>
</span><span id="Response-846"><a href="#Response-846"><span class="linenos"> 846</span></a>
</span><span id="Response-847"><a href="#Response-847"><span class="linenos"> 847</span></a>        <span class="n">chunks</span> <span class="o">=</span> <span class="n">reused_chunks</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="k">else</span> <span class="n">stream_chunks</span>
</span><span id="Response-848"><a href="#Response-848"><span class="linenos"> 848</span></a>
</span><span id="Response-849"><a href="#Response-849"><span class="linenos"> 849</span></a>        <span class="k">if</span> <span class="n">decode_unicode</span><span class="p">:</span>
</span><span id="Response-850"><a href="#Response-850"><span class="linenos"> 850</span></a>            <span class="n">chunks</span> <span class="o">=</span> <span class="n">stream_decode_response_unicode</span><span class="p">(</span><span class="n">chunks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="Response-851"><a href="#Response-851"><span class="linenos"> 851</span></a>
</span><span id="Response-852"><a href="#Response-852"><span class="linenos"> 852</span></a>        <span class="k">return</span> <span class="n">chunks</span>
</span><span id="Response-853"><a href="#Response-853"><span class="linenos"> 853</span></a>
</span><span id="Response-854"><a href="#Response-854"><span class="linenos"> 854</span></a>    <span class="k">def</span> <span class="nf">iter_lines</span><span class="p">(</span>
</span><span id="Response-855"><a href="#Response-855"><span class="linenos"> 855</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="n">ITER_CHUNK_SIZE</span><span class="p">,</span> <span class="n">decode_unicode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="kc">None</span>
</span><span id="Response-856"><a href="#Response-856"><span class="linenos"> 856</span></a>    <span class="p">):</span>
</span><span id="Response-857"><a href="#Response-857"><span class="linenos"> 857</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterates over the response data, one line at a time.  When</span>
</span><span id="Response-858"><a href="#Response-858"><span class="linenos"> 858</span></a><span class="sd">        stream=True is set on the request, this avoids reading the</span>
</span><span id="Response-859"><a href="#Response-859"><span class="linenos"> 859</span></a><span class="sd">        content at once into memory for large responses.</span>
</span><span id="Response-860"><a href="#Response-860"><span class="linenos"> 860</span></a>
</span><span id="Response-861"><a href="#Response-861"><span class="linenos"> 861</span></a><span class="sd">        .. note:: This method is not reentrant safe.</span>
</span><span id="Response-862"><a href="#Response-862"><span class="linenos"> 862</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-863"><a href="#Response-863"><span class="linenos"> 863</span></a>
</span><span id="Response-864"><a href="#Response-864"><span class="linenos"> 864</span></a>        <span class="n">pending</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-865"><a href="#Response-865"><span class="linenos"> 865</span></a>
</span><span id="Response-866"><a href="#Response-866"><span class="linenos"> 866</span></a>        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span>
</span><span id="Response-867"><a href="#Response-867"><span class="linenos"> 867</span></a>            <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">,</span> <span class="n">decode_unicode</span><span class="o">=</span><span class="n">decode_unicode</span>
</span><span id="Response-868"><a href="#Response-868"><span class="linenos"> 868</span></a>        <span class="p">):</span>
</span><span id="Response-869"><a href="#Response-869"><span class="linenos"> 869</span></a>
</span><span id="Response-870"><a href="#Response-870"><span class="linenos"> 870</span></a>            <span class="k">if</span> <span class="n">pending</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response-871"><a href="#Response-871"><span class="linenos"> 871</span></a>                <span class="n">chunk</span> <span class="o">=</span> <span class="n">pending</span> <span class="o">+</span> <span class="n">chunk</span>
</span><span id="Response-872"><a href="#Response-872"><span class="linenos"> 872</span></a>
</span><span id="Response-873"><a href="#Response-873"><span class="linenos"> 873</span></a>            <span class="k">if</span> <span class="n">delimiter</span><span class="p">:</span>
</span><span id="Response-874"><a href="#Response-874"><span class="linenos"> 874</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
</span><span id="Response-875"><a href="#Response-875"><span class="linenos"> 875</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response-876"><a href="#Response-876"><span class="linenos"> 876</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="Response-877"><a href="#Response-877"><span class="linenos"> 877</span></a>
</span><span id="Response-878"><a href="#Response-878"><span class="linenos"> 878</span></a>            <span class="k">if</span> <span class="n">lines</span> <span class="ow">and</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">chunk</span> <span class="ow">and</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">chunk</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="Response-879"><a href="#Response-879"><span class="linenos"> 879</span></a>                <span class="n">pending</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Response-880"><a href="#Response-880"><span class="linenos"> 880</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response-881"><a href="#Response-881"><span class="linenos"> 881</span></a>                <span class="n">pending</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-882"><a href="#Response-882"><span class="linenos"> 882</span></a>
</span><span id="Response-883"><a href="#Response-883"><span class="linenos"> 883</span></a>            <span class="k">yield from</span> <span class="n">lines</span>
</span><span id="Response-884"><a href="#Response-884"><span class="linenos"> 884</span></a>
</span><span id="Response-885"><a href="#Response-885"><span class="linenos"> 885</span></a>        <span class="k">if</span> <span class="n">pending</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response-886"><a href="#Response-886"><span class="linenos"> 886</span></a>            <span class="k">yield</span> <span class="n">pending</span>
</span><span id="Response-887"><a href="#Response-887"><span class="linenos"> 887</span></a>
</span><span id="Response-888"><a href="#Response-888"><span class="linenos"> 888</span></a>    <span class="nd">@property</span>
</span><span id="Response-889"><a href="#Response-889"><span class="linenos"> 889</span></a>    <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-890"><a href="#Response-890"><span class="linenos"> 890</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Content of the response, in bytes.&quot;&quot;&quot;</span>
</span><span id="Response-891"><a href="#Response-891"><span class="linenos"> 891</span></a>
</span><span id="Response-892"><a href="#Response-892"><span class="linenos"> 892</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="Response-893"><a href="#Response-893"><span class="linenos"> 893</span></a>            <span class="c1"># Read the contents.</span>
</span><span id="Response-894"><a href="#Response-894"><span class="linenos"> 894</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span><span class="p">:</span>
</span><span id="Response-895"><a href="#Response-895"><span class="linenos"> 895</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;The content for this response was already consumed&quot;</span><span class="p">)</span>
</span><span id="Response-896"><a href="#Response-896"><span class="linenos"> 896</span></a>
</span><span id="Response-897"><a href="#Response-897"><span class="linenos"> 897</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response-898"><a href="#Response-898"><span class="linenos"> 898</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-899"><a href="#Response-899"><span class="linenos"> 899</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response-900"><a href="#Response-900"><span class="linenos"> 900</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">CONTENT_CHUNK_SIZE</span><span class="p">))</span> <span class="ow">or</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
</span><span id="Response-901"><a href="#Response-901"><span class="linenos"> 901</span></a>
</span><span id="Response-902"><a href="#Response-902"><span class="linenos"> 902</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Response-903"><a href="#Response-903"><span class="linenos"> 903</span></a>        <span class="c1"># don&#39;t need to release the connection; that&#39;s been handled by urllib3</span>
</span><span id="Response-904"><a href="#Response-904"><span class="linenos"> 904</span></a>        <span class="c1"># since we exhausted the data.</span>
</span><span id="Response-905"><a href="#Response-905"><span class="linenos"> 905</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content</span>
</span><span id="Response-906"><a href="#Response-906"><span class="linenos"> 906</span></a>
</span><span id="Response-907"><a href="#Response-907"><span class="linenos"> 907</span></a>    <span class="nd">@property</span>
</span><span id="Response-908"><a href="#Response-908"><span class="linenos"> 908</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-909"><a href="#Response-909"><span class="linenos"> 909</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Content of the response, in unicode.</span>
</span><span id="Response-910"><a href="#Response-910"><span class="linenos"> 910</span></a>
</span><span id="Response-911"><a href="#Response-911"><span class="linenos"> 911</span></a><span class="sd">        If Response.encoding is None, encoding will be guessed using</span>
</span><span id="Response-912"><a href="#Response-912"><span class="linenos"> 912</span></a><span class="sd">        ``charset_normalizer`` or ``chardet``.</span>
</span><span id="Response-913"><a href="#Response-913"><span class="linenos"> 913</span></a>
</span><span id="Response-914"><a href="#Response-914"><span class="linenos"> 914</span></a><span class="sd">        The encoding of the response content is determined based solely on HTTP</span>
</span><span id="Response-915"><a href="#Response-915"><span class="linenos"> 915</span></a><span class="sd">        headers, following RFC 2616 to the letter. If you can take advantage of</span>
</span><span id="Response-916"><a href="#Response-916"><span class="linenos"> 916</span></a><span class="sd">        non-HTTP knowledge to make a better guess at the encoding, you should</span>
</span><span id="Response-917"><a href="#Response-917"><span class="linenos"> 917</span></a><span class="sd">        set ``r.encoding`` appropriately before accessing this property.</span>
</span><span id="Response-918"><a href="#Response-918"><span class="linenos"> 918</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-919"><a href="#Response-919"><span class="linenos"> 919</span></a>
</span><span id="Response-920"><a href="#Response-920"><span class="linenos"> 920</span></a>        <span class="c1"># Try charset from content-type</span>
</span><span id="Response-921"><a href="#Response-921"><span class="linenos"> 921</span></a>        <span class="n">content</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response-922"><a href="#Response-922"><span class="linenos"> 922</span></a>        <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span>
</span><span id="Response-923"><a href="#Response-923"><span class="linenos"> 923</span></a>
</span><span id="Response-924"><a href="#Response-924"><span class="linenos"> 924</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
</span><span id="Response-925"><a href="#Response-925"><span class="linenos"> 925</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="Response-926"><a href="#Response-926"><span class="linenos"> 926</span></a>
</span><span id="Response-927"><a href="#Response-927"><span class="linenos"> 927</span></a>        <span class="c1"># Fallback to auto-detected encoding.</span>
</span><span id="Response-928"><a href="#Response-928"><span class="linenos"> 928</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response-929"><a href="#Response-929"><span class="linenos"> 929</span></a>            <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apparent_encoding</span>
</span><span id="Response-930"><a href="#Response-930"><span class="linenos"> 930</span></a>
</span><span id="Response-931"><a href="#Response-931"><span class="linenos"> 931</span></a>        <span class="c1"># Decode unicode from given encoding.</span>
</span><span id="Response-932"><a href="#Response-932"><span class="linenos"> 932</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Response-933"><a href="#Response-933"><span class="linenos"> 933</span></a>            <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</span><span id="Response-934"><a href="#Response-934"><span class="linenos"> 934</span></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">LookupError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
</span><span id="Response-935"><a href="#Response-935"><span class="linenos"> 935</span></a>            <span class="c1"># A LookupError is raised if the encoding was not found which could</span>
</span><span id="Response-936"><a href="#Response-936"><span class="linenos"> 936</span></a>            <span class="c1"># indicate a misspelling or similar mistake.</span>
</span><span id="Response-937"><a href="#Response-937"><span class="linenos"> 937</span></a>            <span class="c1">#</span>
</span><span id="Response-938"><a href="#Response-938"><span class="linenos"> 938</span></a>            <span class="c1"># A TypeError can be raised if encoding is None</span>
</span><span id="Response-939"><a href="#Response-939"><span class="linenos"> 939</span></a>            <span class="c1">#</span>
</span><span id="Response-940"><a href="#Response-940"><span class="linenos"> 940</span></a>            <span class="c1"># So we try blindly encoding.</span>
</span><span id="Response-941"><a href="#Response-941"><span class="linenos"> 941</span></a>            <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</span><span id="Response-942"><a href="#Response-942"><span class="linenos"> 942</span></a>
</span><span id="Response-943"><a href="#Response-943"><span class="linenos"> 943</span></a>        <span class="k">return</span> <span class="n">content</span>
</span><span id="Response-944"><a href="#Response-944"><span class="linenos"> 944</span></a>
</span><span id="Response-945"><a href="#Response-945"><span class="linenos"> 945</span></a>    <span class="k">def</span> <span class="nf">json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Response-946"><a href="#Response-946"><span class="linenos"> 946</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns the json-encoded content of a response, if any.</span>
</span><span id="Response-947"><a href="#Response-947"><span class="linenos"> 947</span></a>
</span><span id="Response-948"><a href="#Response-948"><span class="linenos"> 948</span></a><span class="sd">        :param \*\*kwargs: Optional arguments that ``json.loads`` takes.</span>
</span><span id="Response-949"><a href="#Response-949"><span class="linenos"> 949</span></a><span class="sd">        :raises requests.exceptions.JSONDecodeError: If the response body does not</span>
</span><span id="Response-950"><a href="#Response-950"><span class="linenos"> 950</span></a><span class="sd">            contain valid json.</span>
</span><span id="Response-951"><a href="#Response-951"><span class="linenos"> 951</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-952"><a href="#Response-952"><span class="linenos"> 952</span></a>
</span><span id="Response-953"><a href="#Response-953"><span class="linenos"> 953</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="Response-954"><a href="#Response-954"><span class="linenos"> 954</span></a>            <span class="c1"># No encoding set. JSON RFC 4627 section 3 states we should expect</span>
</span><span id="Response-955"><a href="#Response-955"><span class="linenos"> 955</span></a>            <span class="c1"># UTF-8, -16 or -32. Detect which one to use; If the detection or</span>
</span><span id="Response-956"><a href="#Response-956"><span class="linenos"> 956</span></a>            <span class="c1"># decoding fails, fall back to `self.text` (using charset_normalizer to make</span>
</span><span id="Response-957"><a href="#Response-957"><span class="linenos"> 957</span></a>            <span class="c1"># a best guess).</span>
</span><span id="Response-958"><a href="#Response-958"><span class="linenos"> 958</span></a>            <span class="n">encoding</span> <span class="o">=</span> <span class="n">guess_json_utf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span><span id="Response-959"><a href="#Response-959"><span class="linenos"> 959</span></a>            <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response-960"><a href="#Response-960"><span class="linenos"> 960</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Response-961"><a href="#Response-961"><span class="linenos"> 961</span></a>                    <span class="k">return</span> <span class="n">complexjson</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Response-962"><a href="#Response-962"><span class="linenos"> 962</span></a>                <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
</span><span id="Response-963"><a href="#Response-963"><span class="linenos"> 963</span></a>                    <span class="c1"># Wrong UTF codec detected; usually because it&#39;s not UTF-8</span>
</span><span id="Response-964"><a href="#Response-964"><span class="linenos"> 964</span></a>                    <span class="c1"># but some other 8-bit codec.  This is an RFC violation,</span>
</span><span id="Response-965"><a href="#Response-965"><span class="linenos"> 965</span></a>                    <span class="c1"># and the server didn&#39;t bother to tell us what codec *was*</span>
</span><span id="Response-966"><a href="#Response-966"><span class="linenos"> 966</span></a>                    <span class="c1"># used.</span>
</span><span id="Response-967"><a href="#Response-967"><span class="linenos"> 967</span></a>                    <span class="k">pass</span>
</span><span id="Response-968"><a href="#Response-968"><span class="linenos"> 968</span></a>                <span class="k">except</span> <span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response-969"><a href="#Response-969"><span class="linenos"> 969</span></a>                    <span class="k">raise</span> <span class="n">RequestsJSONDecodeError</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">msg</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
</span><span id="Response-970"><a href="#Response-970"><span class="linenos"> 970</span></a>
</span><span id="Response-971"><a href="#Response-971"><span class="linenos"> 971</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Response-972"><a href="#Response-972"><span class="linenos"> 972</span></a>            <span class="k">return</span> <span class="n">complexjson</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Response-973"><a href="#Response-973"><span class="linenos"> 973</span></a>        <span class="k">except</span> <span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response-974"><a href="#Response-974"><span class="linenos"> 974</span></a>            <span class="c1"># Catch JSON-related errors and raise as requests.JSONDecodeError</span>
</span><span id="Response-975"><a href="#Response-975"><span class="linenos"> 975</span></a>            <span class="c1"># This aliases json.JSONDecodeError and simplejson.JSONDecodeError</span>
</span><span id="Response-976"><a href="#Response-976"><span class="linenos"> 976</span></a>            <span class="k">raise</span> <span class="n">RequestsJSONDecodeError</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">msg</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
</span><span id="Response-977"><a href="#Response-977"><span class="linenos"> 977</span></a>
</span><span id="Response-978"><a href="#Response-978"><span class="linenos"> 978</span></a>    <span class="nd">@property</span>
</span><span id="Response-979"><a href="#Response-979"><span class="linenos"> 979</span></a>    <span class="k">def</span> <span class="nf">links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-980"><a href="#Response-980"><span class="linenos"> 980</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the parsed header links of the response, if any.&quot;&quot;&quot;</span>
</span><span id="Response-981"><a href="#Response-981"><span class="linenos"> 981</span></a>
</span><span id="Response-982"><a href="#Response-982"><span class="linenos"> 982</span></a>        <span class="n">header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>
</span><span id="Response-983"><a href="#Response-983"><span class="linenos"> 983</span></a>
</span><span id="Response-984"><a href="#Response-984"><span class="linenos"> 984</span></a>        <span class="n">resolved_links</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Response-985"><a href="#Response-985"><span class="linenos"> 985</span></a>
</span><span id="Response-986"><a href="#Response-986"><span class="linenos"> 986</span></a>        <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
</span><span id="Response-987"><a href="#Response-987"><span class="linenos"> 987</span></a>            <span class="n">links</span> <span class="o">=</span> <span class="n">parse_header_links</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</span><span id="Response-988"><a href="#Response-988"><span class="linenos"> 988</span></a>
</span><span id="Response-989"><a href="#Response-989"><span class="linenos"> 989</span></a>            <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
</span><span id="Response-990"><a href="#Response-990"><span class="linenos"> 990</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rel&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
</span><span id="Response-991"><a href="#Response-991"><span class="linenos"> 991</span></a>                <span class="n">resolved_links</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">link</span>
</span><span id="Response-992"><a href="#Response-992"><span class="linenos"> 992</span></a>
</span><span id="Response-993"><a href="#Response-993"><span class="linenos"> 993</span></a>        <span class="k">return</span> <span class="n">resolved_links</span>
</span><span id="Response-994"><a href="#Response-994"><span class="linenos"> 994</span></a>
</span><span id="Response-995"><a href="#Response-995"><span class="linenos"> 995</span></a>    <span class="k">def</span> <span class="nf">raise_for_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-996"><a href="#Response-996"><span class="linenos"> 996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises :class:`HTTPError`, if one occurred.&quot;&quot;&quot;</span>
</span><span id="Response-997"><a href="#Response-997"><span class="linenos"> 997</span></a>
</span><span id="Response-998"><a href="#Response-998"><span class="linenos"> 998</span></a>        <span class="n">http_error_msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Response-999"><a href="#Response-999"><span class="linenos"> 999</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="Response-1000"><a href="#Response-1000"><span class="linenos">1000</span></a>            <span class="c1"># We attempt to decode utf-8 first because some servers</span>
</span><span id="Response-1001"><a href="#Response-1001"><span class="linenos">1001</span></a>            <span class="c1"># choose to localize their reason strings. If the string</span>
</span><span id="Response-1002"><a href="#Response-1002"><span class="linenos">1002</span></a>            <span class="c1"># isn&#39;t utf-8, we fall back to iso-8859-1 for all other</span>
</span><span id="Response-1003"><a href="#Response-1003"><span class="linenos">1003</span></a>            <span class="c1"># encodings. (See PR #3538)</span>
</span><span id="Response-1004"><a href="#Response-1004"><span class="linenos">1004</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Response-1005"><a href="#Response-1005"><span class="linenos">1005</span></a>                <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</span><span id="Response-1006"><a href="#Response-1006"><span class="linenos">1006</span></a>            <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
</span><span id="Response-1007"><a href="#Response-1007"><span class="linenos">1007</span></a>                <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;iso-8859-1&quot;</span><span class="p">)</span>
</span><span id="Response-1008"><a href="#Response-1008"><span class="linenos">1008</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Response-1009"><a href="#Response-1009"><span class="linenos">1009</span></a>            <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason</span>
</span><span id="Response-1010"><a href="#Response-1010"><span class="linenos">1010</span></a>
</span><span id="Response-1011"><a href="#Response-1011"><span class="linenos">1011</span></a>        <span class="k">if</span> <span class="mi">400</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">500</span><span class="p">:</span>
</span><span id="Response-1012"><a href="#Response-1012"><span class="linenos">1012</span></a>            <span class="n">http_error_msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Response-1013"><a href="#Response-1013"><span class="linenos">1013</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> Client Error: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2"> for url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Response-1014"><a href="#Response-1014"><span class="linenos">1014</span></a>            <span class="p">)</span>
</span><span id="Response-1015"><a href="#Response-1015"><span class="linenos">1015</span></a>
</span><span id="Response-1016"><a href="#Response-1016"><span class="linenos">1016</span></a>        <span class="k">elif</span> <span class="mi">500</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">600</span><span class="p">:</span>
</span><span id="Response-1017"><a href="#Response-1017"><span class="linenos">1017</span></a>            <span class="n">http_error_msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Response-1018"><a href="#Response-1018"><span class="linenos">1018</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> Server Error: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2"> for url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Response-1019"><a href="#Response-1019"><span class="linenos">1019</span></a>            <span class="p">)</span>
</span><span id="Response-1020"><a href="#Response-1020"><span class="linenos">1020</span></a>
</span><span id="Response-1021"><a href="#Response-1021"><span class="linenos">1021</span></a>        <span class="k">if</span> <span class="n">http_error_msg</span><span class="p">:</span>
</span><span id="Response-1022"><a href="#Response-1022"><span class="linenos">1022</span></a>            <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span><span class="n">http_error_msg</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Response-1023"><a href="#Response-1023"><span class="linenos">1023</span></a>
</span><span id="Response-1024"><a href="#Response-1024"><span class="linenos">1024</span></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response-1025"><a href="#Response-1025"><span class="linenos">1025</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Releases the connection back to the pool. Once this method has been</span>
</span><span id="Response-1026"><a href="#Response-1026"><span class="linenos">1026</span></a><span class="sd">        called the underlying ``raw`` object must not be accessed again.</span>
</span><span id="Response-1027"><a href="#Response-1027"><span class="linenos">1027</span></a>
</span><span id="Response-1028"><a href="#Response-1028"><span class="linenos">1028</span></a><span class="sd">        *Note: Should not normally need to be called explicitly.*</span>
</span><span id="Response-1029"><a href="#Response-1029"><span class="linenos">1029</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response-1030"><a href="#Response-1030"><span class="linenos">1030</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span><span class="p">:</span>
</span><span id="Response-1031"><a href="#Response-1031"><span class="linenos">1031</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Response-1032"><a href="#Response-1032"><span class="linenos">1032</span></a>
</span><span id="Response-1033"><a href="#Response-1033"><span class="linenos">1033</span></a>        <span class="n">release_conn</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="s2">&quot;release_conn&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Response-1034"><a href="#Response-1034"><span class="linenos">1034</span></a>        <span class="k">if</span> <span class="n">release_conn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response-1035"><a href="#Response-1035"><span class="linenos">1035</span></a>            <span class="n">release_conn</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>The <code>Response &lt;Response&gt;</code> object, which contains a
server's response to an HTTP request.</p>
</div>


                            <div id="Response.status_code" class="classattr">
                                <div class="attr variable">
            <span class="name">status_code</span>

        
    </div>
    <a class="headerlink" href="#Response.status_code"></a>
    
    

                            </div>
                            <div id="Response.headers" class="classattr">
                                <div class="attr variable">
            <span class="name">headers</span>

        
    </div>
    <a class="headerlink" href="#Response.headers"></a>
    
    

                            </div>
                            <div id="Response.raw" class="classattr">
                                <div class="attr variable">
            <span class="name">raw</span>

        
    </div>
    <a class="headerlink" href="#Response.raw"></a>
    
    

                            </div>
                            <div id="Response.url" class="classattr">
                                <div class="attr variable">
            <span class="name">url</span>

        
    </div>
    <a class="headerlink" href="#Response.url"></a>
    
    

                            </div>
                            <div id="Response.encoding" class="classattr">
                                <div class="attr variable">
            <span class="name">encoding</span>

        
    </div>
    <a class="headerlink" href="#Response.encoding"></a>
    
    

                            </div>
                            <div id="Response.history" class="classattr">
                                <div class="attr variable">
            <span class="name">history</span>

        
    </div>
    <a class="headerlink" href="#Response.history"></a>
    
    

                            </div>
                            <div id="Response.reason" class="classattr">
                                <div class="attr variable">
            <span class="name">reason</span>

        
    </div>
    <a class="headerlink" href="#Response.reason"></a>
    
    

                            </div>
                            <div id="Response.cookies" class="classattr">
                                <div class="attr variable">
            <span class="name">cookies</span>

        
    </div>
    <a class="headerlink" href="#Response.cookies"></a>
    
    

                            </div>
                            <div id="Response.elapsed" class="classattr">
                                <div class="attr variable">
            <span class="name">elapsed</span>

        
    </div>
    <a class="headerlink" href="#Response.elapsed"></a>
    
    

                            </div>
                            <div id="Response.request" class="classattr">
                                <div class="attr variable">
            <span class="name">request</span>

        
    </div>
    <a class="headerlink" href="#Response.request"></a>
    
    

                            </div>
                            <div id="Response.ok" class="classattr">
                                        <input id="Response.ok-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">ok</span>

                <label class="view-source-button" for="Response.ok-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.ok"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.ok-756"><a href="#Response.ok-756"><span class="linenos">756</span></a>    <span class="nd">@property</span>
</span><span id="Response.ok-757"><a href="#Response.ok-757"><span class="linenos">757</span></a>    <span class="k">def</span> <span class="nf">ok</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.ok-758"><a href="#Response.ok-758"><span class="linenos">758</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if :attr:`status_code` is less than 400, False if not.</span>
</span><span id="Response.ok-759"><a href="#Response.ok-759"><span class="linenos">759</span></a>
</span><span id="Response.ok-760"><a href="#Response.ok-760"><span class="linenos">760</span></a><span class="sd">        This attribute checks if the status code of the response is between</span>
</span><span id="Response.ok-761"><a href="#Response.ok-761"><span class="linenos">761</span></a><span class="sd">        400 and 600 to see if there was a client error or a server error. If</span>
</span><span id="Response.ok-762"><a href="#Response.ok-762"><span class="linenos">762</span></a><span class="sd">        the status code is between 200 and 400, this will return True. This</span>
</span><span id="Response.ok-763"><a href="#Response.ok-763"><span class="linenos">763</span></a><span class="sd">        is **not** a check to see if the response code is ``200 OK``.</span>
</span><span id="Response.ok-764"><a href="#Response.ok-764"><span class="linenos">764</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response.ok-765"><a href="#Response.ok-765"><span class="linenos">765</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Response.ok-766"><a href="#Response.ok-766"><span class="linenos">766</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span><span id="Response.ok-767"><a href="#Response.ok-767"><span class="linenos">767</span></a>        <span class="k">except</span> <span class="n">HTTPError</span><span class="p">:</span>
</span><span id="Response.ok-768"><a href="#Response.ok-768"><span class="linenos">768</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Response.ok-769"><a href="#Response.ok-769"><span class="linenos">769</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Returns True if <code><a href="#Response.status_code">status_code</a></code> is less than 400, False if not.</p>

<p>This attribute checks if the status code of the response is between
400 and 600 to see if there was a client error or a server error. If
the status code is between 200 and 400, this will return True. This
is <strong>not</strong> a check to see if the response code is <code>200 OK</code>.</p>
</div>


                            </div>
                            <div id="Response.is_redirect" class="classattr">
                                        <input id="Response.is_redirect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_redirect</span>

                <label class="view-source-button" for="Response.is_redirect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.is_redirect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.is_redirect-771"><a href="#Response.is_redirect-771"><span class="linenos">771</span></a>    <span class="nd">@property</span>
</span><span id="Response.is_redirect-772"><a href="#Response.is_redirect-772"><span class="linenos">772</span></a>    <span class="k">def</span> <span class="nf">is_redirect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.is_redirect-773"><a href="#Response.is_redirect-773"><span class="linenos">773</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;True if this Response is a well-formed HTTP redirect that could have</span>
</span><span id="Response.is_redirect-774"><a href="#Response.is_redirect-774"><span class="linenos">774</span></a><span class="sd">        been processed automatically (by :meth:`Session.resolve_redirects`).</span>
</span><span id="Response.is_redirect-775"><a href="#Response.is_redirect-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response.is_redirect-776"><a href="#Response.is_redirect-776"><span class="linenos">776</span></a>        <span class="k">return</span> <span class="s2">&quot;location&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="n">REDIRECT_STATI</span>
</span></pre></div>


            <div class="docstring"><p>True if this Response is a well-formed HTTP redirect that could have
been processed automatically (by <code>Session.resolve_redirects()</code>).</p>
</div>


                            </div>
                            <div id="Response.is_permanent_redirect" class="classattr">
                                        <input id="Response.is_permanent_redirect-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_permanent_redirect</span>

                <label class="view-source-button" for="Response.is_permanent_redirect-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.is_permanent_redirect"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.is_permanent_redirect-778"><a href="#Response.is_permanent_redirect-778"><span class="linenos">778</span></a>    <span class="nd">@property</span>
</span><span id="Response.is_permanent_redirect-779"><a href="#Response.is_permanent_redirect-779"><span class="linenos">779</span></a>    <span class="k">def</span> <span class="nf">is_permanent_redirect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.is_permanent_redirect-780"><a href="#Response.is_permanent_redirect-780"><span class="linenos">780</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;True if this Response one of the permanent versions of redirect.&quot;&quot;&quot;</span>
</span><span id="Response.is_permanent_redirect-781"><a href="#Response.is_permanent_redirect-781"><span class="linenos">781</span></a>        <span class="k">return</span> <span class="s2">&quot;location&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="ow">in</span> <span class="p">(</span>
</span><span id="Response.is_permanent_redirect-782"><a href="#Response.is_permanent_redirect-782"><span class="linenos">782</span></a>            <span class="n">codes</span><span class="o">.</span><span class="n">moved_permanently</span><span class="p">,</span>
</span><span id="Response.is_permanent_redirect-783"><a href="#Response.is_permanent_redirect-783"><span class="linenos">783</span></a>            <span class="n">codes</span><span class="o">.</span><span class="n">permanent_redirect</span><span class="p">,</span>
</span><span id="Response.is_permanent_redirect-784"><a href="#Response.is_permanent_redirect-784"><span class="linenos">784</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>True if this Response one of the permanent versions of redirect.</p>
</div>


                            </div>
                            <div id="Response.next" class="classattr">
                                        <input id="Response.next-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">next</span>

                <label class="view-source-button" for="Response.next-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.next"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.next-786"><a href="#Response.next-786"><span class="linenos">786</span></a>    <span class="nd">@property</span>
</span><span id="Response.next-787"><a href="#Response.next-787"><span class="linenos">787</span></a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.next-788"><a href="#Response.next-788"><span class="linenos">788</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a PreparedRequest for the next request in a redirect chain, if there is one.&quot;&quot;&quot;</span>
</span><span id="Response.next-789"><a href="#Response.next-789"><span class="linenos">789</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next</span>
</span></pre></div>


            <div class="docstring"><p>Returns a PreparedRequest for the next request in a redirect chain, if there is one.</p>
</div>


                            </div>
                            <div id="Response.apparent_encoding" class="classattr">
                                        <input id="Response.apparent_encoding-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">apparent_encoding</span>

                <label class="view-source-button" for="Response.apparent_encoding-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.apparent_encoding"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.apparent_encoding-791"><a href="#Response.apparent_encoding-791"><span class="linenos">791</span></a>    <span class="nd">@property</span>
</span><span id="Response.apparent_encoding-792"><a href="#Response.apparent_encoding-792"><span class="linenos">792</span></a>    <span class="k">def</span> <span class="nf">apparent_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.apparent_encoding-793"><a href="#Response.apparent_encoding-793"><span class="linenos">793</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The apparent encoding, provided by the charset_normalizer or chardet libraries.&quot;&quot;&quot;</span>
</span><span id="Response.apparent_encoding-794"><a href="#Response.apparent_encoding-794"><span class="linenos">794</span></a>        <span class="k">return</span> <span class="n">chardet</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)[</span><span class="s2">&quot;encoding&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The apparent encoding, provided by the charset_normalizer or chardet libraries.</p>
</div>


                            </div>
                            <div id="Response.iter_content" class="classattr">
                                        <input id="Response.iter_content-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">iter_content</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1</span>, </span><span class="param"><span class="n">decode_unicode</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Response.iter_content-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.iter_content"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.iter_content-796"><a href="#Response.iter_content-796"><span class="linenos">796</span></a>    <span class="k">def</span> <span class="nf">iter_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">decode_unicode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Response.iter_content-797"><a href="#Response.iter_content-797"><span class="linenos">797</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterates over the response data.  When stream=True is set on the</span>
</span><span id="Response.iter_content-798"><a href="#Response.iter_content-798"><span class="linenos">798</span></a><span class="sd">        request, this avoids reading the content at once into memory for</span>
</span><span id="Response.iter_content-799"><a href="#Response.iter_content-799"><span class="linenos">799</span></a><span class="sd">        large responses.  The chunk size is the number of bytes it should</span>
</span><span id="Response.iter_content-800"><a href="#Response.iter_content-800"><span class="linenos">800</span></a><span class="sd">        read into memory.  This is not necessarily the length of each item</span>
</span><span id="Response.iter_content-801"><a href="#Response.iter_content-801"><span class="linenos">801</span></a><span class="sd">        returned as decoding can take place.</span>
</span><span id="Response.iter_content-802"><a href="#Response.iter_content-802"><span class="linenos">802</span></a>
</span><span id="Response.iter_content-803"><a href="#Response.iter_content-803"><span class="linenos">803</span></a><span class="sd">        chunk_size must be of type int or None. A value of None will</span>
</span><span id="Response.iter_content-804"><a href="#Response.iter_content-804"><span class="linenos">804</span></a><span class="sd">        function differently depending on the value of `stream`.</span>
</span><span id="Response.iter_content-805"><a href="#Response.iter_content-805"><span class="linenos">805</span></a><span class="sd">        stream=True will read data as it arrives in whatever size the</span>
</span><span id="Response.iter_content-806"><a href="#Response.iter_content-806"><span class="linenos">806</span></a><span class="sd">        chunks are received. If stream=False, data is returned as</span>
</span><span id="Response.iter_content-807"><a href="#Response.iter_content-807"><span class="linenos">807</span></a><span class="sd">        a single chunk.</span>
</span><span id="Response.iter_content-808"><a href="#Response.iter_content-808"><span class="linenos">808</span></a>
</span><span id="Response.iter_content-809"><a href="#Response.iter_content-809"><span class="linenos">809</span></a><span class="sd">        If decode_unicode is True, content will be decoded using the best</span>
</span><span id="Response.iter_content-810"><a href="#Response.iter_content-810"><span class="linenos">810</span></a><span class="sd">        available encoding based on the response.</span>
</span><span id="Response.iter_content-811"><a href="#Response.iter_content-811"><span class="linenos">811</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response.iter_content-812"><a href="#Response.iter_content-812"><span class="linenos">812</span></a>
</span><span id="Response.iter_content-813"><a href="#Response.iter_content-813"><span class="linenos">813</span></a>        <span class="k">def</span> <span class="nf">generate</span><span class="p">():</span>
</span><span id="Response.iter_content-814"><a href="#Response.iter_content-814"><span class="linenos">814</span></a>            <span class="c1"># Special case for urllib3.</span>
</span><span id="Response.iter_content-815"><a href="#Response.iter_content-815"><span class="linenos">815</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="s2">&quot;stream&quot;</span><span class="p">):</span>
</span><span id="Response.iter_content-816"><a href="#Response.iter_content-816"><span class="linenos">816</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Response.iter_content-817"><a href="#Response.iter_content-817"><span class="linenos">817</span></a>                    <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">,</span> <span class="n">decode_content</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Response.iter_content-818"><a href="#Response.iter_content-818"><span class="linenos">818</span></a>                <span class="k">except</span> <span class="n">ProtocolError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response.iter_content-819"><a href="#Response.iter_content-819"><span class="linenos">819</span></a>                    <span class="k">raise</span> <span class="n">ChunkedEncodingError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response.iter_content-820"><a href="#Response.iter_content-820"><span class="linenos">820</span></a>                <span class="k">except</span> <span class="n">DecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response.iter_content-821"><a href="#Response.iter_content-821"><span class="linenos">821</span></a>                    <span class="k">raise</span> <span class="n">ContentDecodingError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response.iter_content-822"><a href="#Response.iter_content-822"><span class="linenos">822</span></a>                <span class="k">except</span> <span class="n">ReadTimeoutError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response.iter_content-823"><a href="#Response.iter_content-823"><span class="linenos">823</span></a>                    <span class="k">raise</span> <span class="ne">ConnectionError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response.iter_content-824"><a href="#Response.iter_content-824"><span class="linenos">824</span></a>                <span class="k">except</span> <span class="n">SSLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response.iter_content-825"><a href="#Response.iter_content-825"><span class="linenos">825</span></a>                    <span class="k">raise</span> <span class="n">RequestsSSLError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="Response.iter_content-826"><a href="#Response.iter_content-826"><span class="linenos">826</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response.iter_content-827"><a href="#Response.iter_content-827"><span class="linenos">827</span></a>                <span class="c1"># Standard file-like object.</span>
</span><span id="Response.iter_content-828"><a href="#Response.iter_content-828"><span class="linenos">828</span></a>                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="Response.iter_content-829"><a href="#Response.iter_content-829"><span class="linenos">829</span></a>                    <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">)</span>
</span><span id="Response.iter_content-830"><a href="#Response.iter_content-830"><span class="linenos">830</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
</span><span id="Response.iter_content-831"><a href="#Response.iter_content-831"><span class="linenos">831</span></a>                        <span class="k">break</span>
</span><span id="Response.iter_content-832"><a href="#Response.iter_content-832"><span class="linenos">832</span></a>                    <span class="k">yield</span> <span class="n">chunk</span>
</span><span id="Response.iter_content-833"><a href="#Response.iter_content-833"><span class="linenos">833</span></a>
</span><span id="Response.iter_content-834"><a href="#Response.iter_content-834"><span class="linenos">834</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Response.iter_content-835"><a href="#Response.iter_content-835"><span class="linenos">835</span></a>
</span><span id="Response.iter_content-836"><a href="#Response.iter_content-836"><span class="linenos">836</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_content</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="Response.iter_content-837"><a href="#Response.iter_content-837"><span class="linenos">837</span></a>            <span class="k">raise</span> <span class="n">StreamConsumedError</span><span class="p">()</span>
</span><span id="Response.iter_content-838"><a href="#Response.iter_content-838"><span class="linenos">838</span></a>        <span class="k">elif</span> <span class="n">chunk_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="Response.iter_content-839"><a href="#Response.iter_content-839"><span class="linenos">839</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Response.iter_content-840"><a href="#Response.iter_content-840"><span class="linenos">840</span></a>                <span class="sa">f</span><span class="s2">&quot;chunk_size must be an int, it is instead a </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span id="Response.iter_content-841"><a href="#Response.iter_content-841"><span class="linenos">841</span></a>            <span class="p">)</span>
</span><span id="Response.iter_content-842"><a href="#Response.iter_content-842"><span class="linenos">842</span></a>        <span class="c1"># simulate reading small chunks of the content</span>
</span><span id="Response.iter_content-843"><a href="#Response.iter_content-843"><span class="linenos">843</span></a>        <span class="n">reused_chunks</span> <span class="o">=</span> <span class="n">iter_slices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_content</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">)</span>
</span><span id="Response.iter_content-844"><a href="#Response.iter_content-844"><span class="linenos">844</span></a>
</span><span id="Response.iter_content-845"><a href="#Response.iter_content-845"><span class="linenos">845</span></a>        <span class="n">stream_chunks</span> <span class="o">=</span> <span class="n">generate</span><span class="p">()</span>
</span><span id="Response.iter_content-846"><a href="#Response.iter_content-846"><span class="linenos">846</span></a>
</span><span id="Response.iter_content-847"><a href="#Response.iter_content-847"><span class="linenos">847</span></a>        <span class="n">chunks</span> <span class="o">=</span> <span class="n">reused_chunks</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="k">else</span> <span class="n">stream_chunks</span>
</span><span id="Response.iter_content-848"><a href="#Response.iter_content-848"><span class="linenos">848</span></a>
</span><span id="Response.iter_content-849"><a href="#Response.iter_content-849"><span class="linenos">849</span></a>        <span class="k">if</span> <span class="n">decode_unicode</span><span class="p">:</span>
</span><span id="Response.iter_content-850"><a href="#Response.iter_content-850"><span class="linenos">850</span></a>            <span class="n">chunks</span> <span class="o">=</span> <span class="n">stream_decode_response_unicode</span><span class="p">(</span><span class="n">chunks</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="Response.iter_content-851"><a href="#Response.iter_content-851"><span class="linenos">851</span></a>
</span><span id="Response.iter_content-852"><a href="#Response.iter_content-852"><span class="linenos">852</span></a>        <span class="k">return</span> <span class="n">chunks</span>
</span></pre></div>


            <div class="docstring"><p>Iterates over the response data.  When stream=True is set on the
request, this avoids reading the content at once into memory for
large responses.  The chunk size is the number of bytes it should
read into memory.  This is not necessarily the length of each item
returned as decoding can take place.</p>

<p>chunk_size must be of type int or None. A value of None will
function differently depending on the value of <code>stream</code>.
stream=True will read data as it arrives in whatever size the
chunks are received. If stream=False, data is returned as
a single chunk.</p>

<p>If decode_unicode is True, content will be decoded using the best
available encoding based on the response.</p>
</div>


                            </div>
                            <div id="Response.iter_lines" class="classattr">
                                        <input id="Response.iter_lines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">iter_lines</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">chunk_size</span><span class="o">=</span><span class="mi">512</span>, </span><span class="param"><span class="n">decode_unicode</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">delimiter</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Response.iter_lines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.iter_lines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.iter_lines-854"><a href="#Response.iter_lines-854"><span class="linenos">854</span></a>    <span class="k">def</span> <span class="nf">iter_lines</span><span class="p">(</span>
</span><span id="Response.iter_lines-855"><a href="#Response.iter_lines-855"><span class="linenos">855</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="n">ITER_CHUNK_SIZE</span><span class="p">,</span> <span class="n">decode_unicode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="kc">None</span>
</span><span id="Response.iter_lines-856"><a href="#Response.iter_lines-856"><span class="linenos">856</span></a>    <span class="p">):</span>
</span><span id="Response.iter_lines-857"><a href="#Response.iter_lines-857"><span class="linenos">857</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterates over the response data, one line at a time.  When</span>
</span><span id="Response.iter_lines-858"><a href="#Response.iter_lines-858"><span class="linenos">858</span></a><span class="sd">        stream=True is set on the request, this avoids reading the</span>
</span><span id="Response.iter_lines-859"><a href="#Response.iter_lines-859"><span class="linenos">859</span></a><span class="sd">        content at once into memory for large responses.</span>
</span><span id="Response.iter_lines-860"><a href="#Response.iter_lines-860"><span class="linenos">860</span></a>
</span><span id="Response.iter_lines-861"><a href="#Response.iter_lines-861"><span class="linenos">861</span></a><span class="sd">        .. note:: This method is not reentrant safe.</span>
</span><span id="Response.iter_lines-862"><a href="#Response.iter_lines-862"><span class="linenos">862</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response.iter_lines-863"><a href="#Response.iter_lines-863"><span class="linenos">863</span></a>
</span><span id="Response.iter_lines-864"><a href="#Response.iter_lines-864"><span class="linenos">864</span></a>        <span class="n">pending</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response.iter_lines-865"><a href="#Response.iter_lines-865"><span class="linenos">865</span></a>
</span><span id="Response.iter_lines-866"><a href="#Response.iter_lines-866"><span class="linenos">866</span></a>        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span>
</span><span id="Response.iter_lines-867"><a href="#Response.iter_lines-867"><span class="linenos">867</span></a>            <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">,</span> <span class="n">decode_unicode</span><span class="o">=</span><span class="n">decode_unicode</span>
</span><span id="Response.iter_lines-868"><a href="#Response.iter_lines-868"><span class="linenos">868</span></a>        <span class="p">):</span>
</span><span id="Response.iter_lines-869"><a href="#Response.iter_lines-869"><span class="linenos">869</span></a>
</span><span id="Response.iter_lines-870"><a href="#Response.iter_lines-870"><span class="linenos">870</span></a>            <span class="k">if</span> <span class="n">pending</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response.iter_lines-871"><a href="#Response.iter_lines-871"><span class="linenos">871</span></a>                <span class="n">chunk</span> <span class="o">=</span> <span class="n">pending</span> <span class="o">+</span> <span class="n">chunk</span>
</span><span id="Response.iter_lines-872"><a href="#Response.iter_lines-872"><span class="linenos">872</span></a>
</span><span id="Response.iter_lines-873"><a href="#Response.iter_lines-873"><span class="linenos">873</span></a>            <span class="k">if</span> <span class="n">delimiter</span><span class="p">:</span>
</span><span id="Response.iter_lines-874"><a href="#Response.iter_lines-874"><span class="linenos">874</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
</span><span id="Response.iter_lines-875"><a href="#Response.iter_lines-875"><span class="linenos">875</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response.iter_lines-876"><a href="#Response.iter_lines-876"><span class="linenos">876</span></a>                <span class="n">lines</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="Response.iter_lines-877"><a href="#Response.iter_lines-877"><span class="linenos">877</span></a>
</span><span id="Response.iter_lines-878"><a href="#Response.iter_lines-878"><span class="linenos">878</span></a>            <span class="k">if</span> <span class="n">lines</span> <span class="ow">and</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">chunk</span> <span class="ow">and</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">chunk</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="Response.iter_lines-879"><a href="#Response.iter_lines-879"><span class="linenos">879</span></a>                <span class="n">pending</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="Response.iter_lines-880"><a href="#Response.iter_lines-880"><span class="linenos">880</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response.iter_lines-881"><a href="#Response.iter_lines-881"><span class="linenos">881</span></a>                <span class="n">pending</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response.iter_lines-882"><a href="#Response.iter_lines-882"><span class="linenos">882</span></a>
</span><span id="Response.iter_lines-883"><a href="#Response.iter_lines-883"><span class="linenos">883</span></a>            <span class="k">yield from</span> <span class="n">lines</span>
</span><span id="Response.iter_lines-884"><a href="#Response.iter_lines-884"><span class="linenos">884</span></a>
</span><span id="Response.iter_lines-885"><a href="#Response.iter_lines-885"><span class="linenos">885</span></a>        <span class="k">if</span> <span class="n">pending</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response.iter_lines-886"><a href="#Response.iter_lines-886"><span class="linenos">886</span></a>            <span class="k">yield</span> <span class="n">pending</span>
</span></pre></div>


            <div class="docstring"><p>Iterates over the response data, one line at a time.  When
stream=True is set on the request, this avoids reading the
content at once into memory for large responses.</p>

<div class="pdoc-alert pdoc-alert-note">

<h6 id="this-method-is-not-reentrant-safe">This method is not reentrant safe.</h6>

</div>
</div>


                            </div>
                            <div id="Response.content" class="classattr">
                                        <input id="Response.content-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">content</span>

                <label class="view-source-button" for="Response.content-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.content"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.content-888"><a href="#Response.content-888"><span class="linenos">888</span></a>    <span class="nd">@property</span>
</span><span id="Response.content-889"><a href="#Response.content-889"><span class="linenos">889</span></a>    <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.content-890"><a href="#Response.content-890"><span class="linenos">890</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Content of the response, in bytes.&quot;&quot;&quot;</span>
</span><span id="Response.content-891"><a href="#Response.content-891"><span class="linenos">891</span></a>
</span><span id="Response.content-892"><a href="#Response.content-892"><span class="linenos">892</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="Response.content-893"><a href="#Response.content-893"><span class="linenos">893</span></a>            <span class="c1"># Read the contents.</span>
</span><span id="Response.content-894"><a href="#Response.content-894"><span class="linenos">894</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span><span class="p">:</span>
</span><span id="Response.content-895"><a href="#Response.content-895"><span class="linenos">895</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;The content for this response was already consumed&quot;</span><span class="p">)</span>
</span><span id="Response.content-896"><a href="#Response.content-896"><span class="linenos">896</span></a>
</span><span id="Response.content-897"><a href="#Response.content-897"><span class="linenos">897</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response.content-898"><a href="#Response.content-898"><span class="linenos">898</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response.content-899"><a href="#Response.content-899"><span class="linenos">899</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Response.content-900"><a href="#Response.content-900"><span class="linenos">900</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">CONTENT_CHUNK_SIZE</span><span class="p">))</span> <span class="ow">or</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
</span><span id="Response.content-901"><a href="#Response.content-901"><span class="linenos">901</span></a>
</span><span id="Response.content-902"><a href="#Response.content-902"><span class="linenos">902</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Response.content-903"><a href="#Response.content-903"><span class="linenos">903</span></a>        <span class="c1"># don&#39;t need to release the connection; that&#39;s been handled by urllib3</span>
</span><span id="Response.content-904"><a href="#Response.content-904"><span class="linenos">904</span></a>        <span class="c1"># since we exhausted the data.</span>
</span><span id="Response.content-905"><a href="#Response.content-905"><span class="linenos">905</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content</span>
</span></pre></div>


            <div class="docstring"><p>Content of the response, in bytes.</p>
</div>


                            </div>
                            <div id="Response.text" class="classattr">
                                        <input id="Response.text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">text</span>

                <label class="view-source-button" for="Response.text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.text-907"><a href="#Response.text-907"><span class="linenos">907</span></a>    <span class="nd">@property</span>
</span><span id="Response.text-908"><a href="#Response.text-908"><span class="linenos">908</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.text-909"><a href="#Response.text-909"><span class="linenos">909</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Content of the response, in unicode.</span>
</span><span id="Response.text-910"><a href="#Response.text-910"><span class="linenos">910</span></a>
</span><span id="Response.text-911"><a href="#Response.text-911"><span class="linenos">911</span></a><span class="sd">        If Response.encoding is None, encoding will be guessed using</span>
</span><span id="Response.text-912"><a href="#Response.text-912"><span class="linenos">912</span></a><span class="sd">        ``charset_normalizer`` or ``chardet``.</span>
</span><span id="Response.text-913"><a href="#Response.text-913"><span class="linenos">913</span></a>
</span><span id="Response.text-914"><a href="#Response.text-914"><span class="linenos">914</span></a><span class="sd">        The encoding of the response content is determined based solely on HTTP</span>
</span><span id="Response.text-915"><a href="#Response.text-915"><span class="linenos">915</span></a><span class="sd">        headers, following RFC 2616 to the letter. If you can take advantage of</span>
</span><span id="Response.text-916"><a href="#Response.text-916"><span class="linenos">916</span></a><span class="sd">        non-HTTP knowledge to make a better guess at the encoding, you should</span>
</span><span id="Response.text-917"><a href="#Response.text-917"><span class="linenos">917</span></a><span class="sd">        set ``r.encoding`` appropriately before accessing this property.</span>
</span><span id="Response.text-918"><a href="#Response.text-918"><span class="linenos">918</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response.text-919"><a href="#Response.text-919"><span class="linenos">919</span></a>
</span><span id="Response.text-920"><a href="#Response.text-920"><span class="linenos">920</span></a>        <span class="c1"># Try charset from content-type</span>
</span><span id="Response.text-921"><a href="#Response.text-921"><span class="linenos">921</span></a>        <span class="n">content</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Response.text-922"><a href="#Response.text-922"><span class="linenos">922</span></a>        <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span>
</span><span id="Response.text-923"><a href="#Response.text-923"><span class="linenos">923</span></a>
</span><span id="Response.text-924"><a href="#Response.text-924"><span class="linenos">924</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
</span><span id="Response.text-925"><a href="#Response.text-925"><span class="linenos">925</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="Response.text-926"><a href="#Response.text-926"><span class="linenos">926</span></a>
</span><span id="Response.text-927"><a href="#Response.text-927"><span class="linenos">927</span></a>        <span class="c1"># Fallback to auto-detected encoding.</span>
</span><span id="Response.text-928"><a href="#Response.text-928"><span class="linenos">928</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response.text-929"><a href="#Response.text-929"><span class="linenos">929</span></a>            <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apparent_encoding</span>
</span><span id="Response.text-930"><a href="#Response.text-930"><span class="linenos">930</span></a>
</span><span id="Response.text-931"><a href="#Response.text-931"><span class="linenos">931</span></a>        <span class="c1"># Decode unicode from given encoding.</span>
</span><span id="Response.text-932"><a href="#Response.text-932"><span class="linenos">932</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Response.text-933"><a href="#Response.text-933"><span class="linenos">933</span></a>            <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</span><span id="Response.text-934"><a href="#Response.text-934"><span class="linenos">934</span></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">LookupError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
</span><span id="Response.text-935"><a href="#Response.text-935"><span class="linenos">935</span></a>            <span class="c1"># A LookupError is raised if the encoding was not found which could</span>
</span><span id="Response.text-936"><a href="#Response.text-936"><span class="linenos">936</span></a>            <span class="c1"># indicate a misspelling or similar mistake.</span>
</span><span id="Response.text-937"><a href="#Response.text-937"><span class="linenos">937</span></a>            <span class="c1">#</span>
</span><span id="Response.text-938"><a href="#Response.text-938"><span class="linenos">938</span></a>            <span class="c1"># A TypeError can be raised if encoding is None</span>
</span><span id="Response.text-939"><a href="#Response.text-939"><span class="linenos">939</span></a>            <span class="c1">#</span>
</span><span id="Response.text-940"><a href="#Response.text-940"><span class="linenos">940</span></a>            <span class="c1"># So we try blindly encoding.</span>
</span><span id="Response.text-941"><a href="#Response.text-941"><span class="linenos">941</span></a>            <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</span><span id="Response.text-942"><a href="#Response.text-942"><span class="linenos">942</span></a>
</span><span id="Response.text-943"><a href="#Response.text-943"><span class="linenos">943</span></a>        <span class="k">return</span> <span class="n">content</span>
</span></pre></div>


            <div class="docstring"><p>Content of the response, in unicode.</p>

<p>If <a href="#Response.encoding">Response.encoding</a> is None, encoding will be guessed using
<code>charset_normalizer</code> or <code>chardet</code>.</p>

<p>The encoding of the response content is determined based solely on HTTP
headers, following RFC 2616 to the letter. If you can take advantage of
non-HTTP knowledge to make a better guess at the encoding, you should
set <code>r.encoding</code> appropriately before accessing this property.</p>
</div>


                            </div>
                            <div id="Response.json" class="classattr">
                                        <input id="Response.json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">json</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Response.json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.json-945"><a href="#Response.json-945"><span class="linenos">945</span></a>    <span class="k">def</span> <span class="nf">json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Response.json-946"><a href="#Response.json-946"><span class="linenos">946</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns the json-encoded content of a response, if any.</span>
</span><span id="Response.json-947"><a href="#Response.json-947"><span class="linenos">947</span></a>
</span><span id="Response.json-948"><a href="#Response.json-948"><span class="linenos">948</span></a><span class="sd">        :param \*\*kwargs: Optional arguments that ``json.loads`` takes.</span>
</span><span id="Response.json-949"><a href="#Response.json-949"><span class="linenos">949</span></a><span class="sd">        :raises requests.exceptions.JSONDecodeError: If the response body does not</span>
</span><span id="Response.json-950"><a href="#Response.json-950"><span class="linenos">950</span></a><span class="sd">            contain valid json.</span>
</span><span id="Response.json-951"><a href="#Response.json-951"><span class="linenos">951</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response.json-952"><a href="#Response.json-952"><span class="linenos">952</span></a>
</span><span id="Response.json-953"><a href="#Response.json-953"><span class="linenos">953</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="Response.json-954"><a href="#Response.json-954"><span class="linenos">954</span></a>            <span class="c1"># No encoding set. JSON RFC 4627 section 3 states we should expect</span>
</span><span id="Response.json-955"><a href="#Response.json-955"><span class="linenos">955</span></a>            <span class="c1"># UTF-8, -16 or -32. Detect which one to use; If the detection or</span>
</span><span id="Response.json-956"><a href="#Response.json-956"><span class="linenos">956</span></a>            <span class="c1"># decoding fails, fall back to `self.text` (using charset_normalizer to make</span>
</span><span id="Response.json-957"><a href="#Response.json-957"><span class="linenos">957</span></a>            <span class="c1"># a best guess).</span>
</span><span id="Response.json-958"><a href="#Response.json-958"><span class="linenos">958</span></a>            <span class="n">encoding</span> <span class="o">=</span> <span class="n">guess_json_utf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span><span id="Response.json-959"><a href="#Response.json-959"><span class="linenos">959</span></a>            <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response.json-960"><a href="#Response.json-960"><span class="linenos">960</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Response.json-961"><a href="#Response.json-961"><span class="linenos">961</span></a>                    <span class="k">return</span> <span class="n">complexjson</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Response.json-962"><a href="#Response.json-962"><span class="linenos">962</span></a>                <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
</span><span id="Response.json-963"><a href="#Response.json-963"><span class="linenos">963</span></a>                    <span class="c1"># Wrong UTF codec detected; usually because it&#39;s not UTF-8</span>
</span><span id="Response.json-964"><a href="#Response.json-964"><span class="linenos">964</span></a>                    <span class="c1"># but some other 8-bit codec.  This is an RFC violation,</span>
</span><span id="Response.json-965"><a href="#Response.json-965"><span class="linenos">965</span></a>                    <span class="c1"># and the server didn&#39;t bother to tell us what codec *was*</span>
</span><span id="Response.json-966"><a href="#Response.json-966"><span class="linenos">966</span></a>                    <span class="c1"># used.</span>
</span><span id="Response.json-967"><a href="#Response.json-967"><span class="linenos">967</span></a>                    <span class="k">pass</span>
</span><span id="Response.json-968"><a href="#Response.json-968"><span class="linenos">968</span></a>                <span class="k">except</span> <span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response.json-969"><a href="#Response.json-969"><span class="linenos">969</span></a>                    <span class="k">raise</span> <span class="n">RequestsJSONDecodeError</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">msg</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
</span><span id="Response.json-970"><a href="#Response.json-970"><span class="linenos">970</span></a>
</span><span id="Response.json-971"><a href="#Response.json-971"><span class="linenos">971</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Response.json-972"><a href="#Response.json-972"><span class="linenos">972</span></a>            <span class="k">return</span> <span class="n">complexjson</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Response.json-973"><a href="#Response.json-973"><span class="linenos">973</span></a>        <span class="k">except</span> <span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Response.json-974"><a href="#Response.json-974"><span class="linenos">974</span></a>            <span class="c1"># Catch JSON-related errors and raise as requests.JSONDecodeError</span>
</span><span id="Response.json-975"><a href="#Response.json-975"><span class="linenos">975</span></a>            <span class="c1"># This aliases json.JSONDecodeError and simplejson.JSONDecodeError</span>
</span><span id="Response.json-976"><a href="#Response.json-976"><span class="linenos">976</span></a>            <span class="k">raise</span> <span class="n">RequestsJSONDecodeError</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">msg</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the json-encoded content of a response, if any.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>**kwargs</strong>:  Optional arguments that <code>json.loads</code> takes.</li>
</ul>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>requests.exceptions.JSONDecodeError</strong>:  If the response body does not
contain valid json.</li>
</ul>
</div>


                            </div>
                            <div id="Response.links" class="classattr">
                                        <input id="Response.links-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">links</span>

                <label class="view-source-button" for="Response.links-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.links"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.links-978"><a href="#Response.links-978"><span class="linenos">978</span></a>    <span class="nd">@property</span>
</span><span id="Response.links-979"><a href="#Response.links-979"><span class="linenos">979</span></a>    <span class="k">def</span> <span class="nf">links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.links-980"><a href="#Response.links-980"><span class="linenos">980</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the parsed header links of the response, if any.&quot;&quot;&quot;</span>
</span><span id="Response.links-981"><a href="#Response.links-981"><span class="linenos">981</span></a>
</span><span id="Response.links-982"><a href="#Response.links-982"><span class="linenos">982</span></a>        <span class="n">header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>
</span><span id="Response.links-983"><a href="#Response.links-983"><span class="linenos">983</span></a>
</span><span id="Response.links-984"><a href="#Response.links-984"><span class="linenos">984</span></a>        <span class="n">resolved_links</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Response.links-985"><a href="#Response.links-985"><span class="linenos">985</span></a>
</span><span id="Response.links-986"><a href="#Response.links-986"><span class="linenos">986</span></a>        <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
</span><span id="Response.links-987"><a href="#Response.links-987"><span class="linenos">987</span></a>            <span class="n">links</span> <span class="o">=</span> <span class="n">parse_header_links</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</span><span id="Response.links-988"><a href="#Response.links-988"><span class="linenos">988</span></a>
</span><span id="Response.links-989"><a href="#Response.links-989"><span class="linenos">989</span></a>            <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
</span><span id="Response.links-990"><a href="#Response.links-990"><span class="linenos">990</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rel&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
</span><span id="Response.links-991"><a href="#Response.links-991"><span class="linenos">991</span></a>                <span class="n">resolved_links</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">link</span>
</span><span id="Response.links-992"><a href="#Response.links-992"><span class="linenos">992</span></a>
</span><span id="Response.links-993"><a href="#Response.links-993"><span class="linenos">993</span></a>        <span class="k">return</span> <span class="n">resolved_links</span>
</span></pre></div>


            <div class="docstring"><p>Returns the parsed header links of the response, if any.</p>
</div>


                            </div>
                            <div id="Response.raise_for_status" class="classattr">
                                        <input id="Response.raise_for_status-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">raise_for_status</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Response.raise_for_status-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.raise_for_status"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.raise_for_status-995"><a href="#Response.raise_for_status-995"><span class="linenos"> 995</span></a>    <span class="k">def</span> <span class="nf">raise_for_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.raise_for_status-996"><a href="#Response.raise_for_status-996"><span class="linenos"> 996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises :class:`HTTPError`, if one occurred.&quot;&quot;&quot;</span>
</span><span id="Response.raise_for_status-997"><a href="#Response.raise_for_status-997"><span class="linenos"> 997</span></a>
</span><span id="Response.raise_for_status-998"><a href="#Response.raise_for_status-998"><span class="linenos"> 998</span></a>        <span class="n">http_error_msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Response.raise_for_status-999"><a href="#Response.raise_for_status-999"><span class="linenos"> 999</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="Response.raise_for_status-1000"><a href="#Response.raise_for_status-1000"><span class="linenos">1000</span></a>            <span class="c1"># We attempt to decode utf-8 first because some servers</span>
</span><span id="Response.raise_for_status-1001"><a href="#Response.raise_for_status-1001"><span class="linenos">1001</span></a>            <span class="c1"># choose to localize their reason strings. If the string</span>
</span><span id="Response.raise_for_status-1002"><a href="#Response.raise_for_status-1002"><span class="linenos">1002</span></a>            <span class="c1"># isn&#39;t utf-8, we fall back to iso-8859-1 for all other</span>
</span><span id="Response.raise_for_status-1003"><a href="#Response.raise_for_status-1003"><span class="linenos">1003</span></a>            <span class="c1"># encodings. (See PR #3538)</span>
</span><span id="Response.raise_for_status-1004"><a href="#Response.raise_for_status-1004"><span class="linenos">1004</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Response.raise_for_status-1005"><a href="#Response.raise_for_status-1005"><span class="linenos">1005</span></a>                <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</span><span id="Response.raise_for_status-1006"><a href="#Response.raise_for_status-1006"><span class="linenos">1006</span></a>            <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
</span><span id="Response.raise_for_status-1007"><a href="#Response.raise_for_status-1007"><span class="linenos">1007</span></a>                <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;iso-8859-1&quot;</span><span class="p">)</span>
</span><span id="Response.raise_for_status-1008"><a href="#Response.raise_for_status-1008"><span class="linenos">1008</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Response.raise_for_status-1009"><a href="#Response.raise_for_status-1009"><span class="linenos">1009</span></a>            <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason</span>
</span><span id="Response.raise_for_status-1010"><a href="#Response.raise_for_status-1010"><span class="linenos">1010</span></a>
</span><span id="Response.raise_for_status-1011"><a href="#Response.raise_for_status-1011"><span class="linenos">1011</span></a>        <span class="k">if</span> <span class="mi">400</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">500</span><span class="p">:</span>
</span><span id="Response.raise_for_status-1012"><a href="#Response.raise_for_status-1012"><span class="linenos">1012</span></a>            <span class="n">http_error_msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Response.raise_for_status-1013"><a href="#Response.raise_for_status-1013"><span class="linenos">1013</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> Client Error: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2"> for url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Response.raise_for_status-1014"><a href="#Response.raise_for_status-1014"><span class="linenos">1014</span></a>            <span class="p">)</span>
</span><span id="Response.raise_for_status-1015"><a href="#Response.raise_for_status-1015"><span class="linenos">1015</span></a>
</span><span id="Response.raise_for_status-1016"><a href="#Response.raise_for_status-1016"><span class="linenos">1016</span></a>        <span class="k">elif</span> <span class="mi">500</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">600</span><span class="p">:</span>
</span><span id="Response.raise_for_status-1017"><a href="#Response.raise_for_status-1017"><span class="linenos">1017</span></a>            <span class="n">http_error_msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Response.raise_for_status-1018"><a href="#Response.raise_for_status-1018"><span class="linenos">1018</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> Server Error: </span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2"> for url: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Response.raise_for_status-1019"><a href="#Response.raise_for_status-1019"><span class="linenos">1019</span></a>            <span class="p">)</span>
</span><span id="Response.raise_for_status-1020"><a href="#Response.raise_for_status-1020"><span class="linenos">1020</span></a>
</span><span id="Response.raise_for_status-1021"><a href="#Response.raise_for_status-1021"><span class="linenos">1021</span></a>        <span class="k">if</span> <span class="n">http_error_msg</span><span class="p">:</span>
</span><span id="Response.raise_for_status-1022"><a href="#Response.raise_for_status-1022"><span class="linenos">1022</span></a>            <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span><span class="n">http_error_msg</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Raises <code>HTTPError</code>, if one occurred.</p>
</div>


                            </div>
                            <div id="Response.close" class="classattr">
                                        <input id="Response.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Response.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Response.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Response.close-1024"><a href="#Response.close-1024"><span class="linenos">1024</span></a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Response.close-1025"><a href="#Response.close-1025"><span class="linenos">1025</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Releases the connection back to the pool. Once this method has been</span>
</span><span id="Response.close-1026"><a href="#Response.close-1026"><span class="linenos">1026</span></a><span class="sd">        called the underlying ``raw`` object must not be accessed again.</span>
</span><span id="Response.close-1027"><a href="#Response.close-1027"><span class="linenos">1027</span></a>
</span><span id="Response.close-1028"><a href="#Response.close-1028"><span class="linenos">1028</span></a><span class="sd">        *Note: Should not normally need to be called explicitly.*</span>
</span><span id="Response.close-1029"><a href="#Response.close-1029"><span class="linenos">1029</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Response.close-1030"><a href="#Response.close-1030"><span class="linenos">1030</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content_consumed</span><span class="p">:</span>
</span><span id="Response.close-1031"><a href="#Response.close-1031"><span class="linenos">1031</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Response.close-1032"><a href="#Response.close-1032"><span class="linenos">1032</span></a>
</span><span id="Response.close-1033"><a href="#Response.close-1033"><span class="linenos">1033</span></a>        <span class="n">release_conn</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="s2">&quot;release_conn&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Response.close-1034"><a href="#Response.close-1034"><span class="linenos">1034</span></a>        <span class="k">if</span> <span class="n">release_conn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Response.close-1035"><a href="#Response.close-1035"><span class="linenos">1035</span></a>            <span class="n">release_conn</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Releases the connection back to the pool. Once this method has been
called the underlying <code><a href="#Response.raw">raw</a></code> object must not be accessed again.</p>

<p><em>Note: Should not normally need to be called explicitly.</em></p>
</div>


                            </div>
                </section>
                <section id="LanguageTags">
                    <div class="attr variable">
            <span class="name">LanguageTags</span>        =
<span class="default_value">typing.List[str]</span>

        
    </div>
    <a class="headerlink" href="#LanguageTags"></a>
    
    

                </section>
                <section id="repo">
                    <div class="attr variable">
            <span class="name">repo</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;code/arrange_tmx_files_with_extension.py&#39;</span>

        
    </div>
    <a class="headerlink" href="#repo"></a>
    
    

                </section>
                <section id="get_locales">
                            <input id="get_locales-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_locales</span><span class="signature pdoc-code condensed">(<span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="get_locales-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_locales"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_locales-25"><a href="#get_locales-25"><span class="linenos">25</span></a><span class="k">def</span> <span class="nf">get_locales</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="get_locales-26"><a href="#get_locales-26"><span class="linenos">26</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_locales-27"><a href="#get_locales-27"><span class="linenos">27</span></a><span class="sd">    Fetches language tags from an external source.</span>
</span><span id="get_locales-28"><a href="#get_locales-28"><span class="linenos">28</span></a>
</span><span id="get_locales-29"><a href="#get_locales-29"><span class="linenos">29</span></a><span class="sd">    Returns:</span>
</span><span id="get_locales-30"><a href="#get_locales-30"><span class="linenos">30</span></a><span class="sd">        list: A list of dictionaries containing locales in different conventions.</span>
</span><span id="get_locales-31"><a href="#get_locales-31"><span class="linenos">31</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_locales-32"><a href="#get_locales-32"><span class="linenos">32</span></a>    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;https://capps.capstan.be/langtags_json.php&#39;</span>
</span><span id="get_locales-33"><a href="#get_locales-33"><span class="linenos">33</span></a>    <span class="n">response</span><span class="p">:</span> <span class="n">Response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="get_locales-34"><a href="#get_locales-34"><span class="linenos">34</span></a>    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Fetches language tags from an external source.</p>

<p>Returns:
    list: A list of dictionaries containing locales in different conventions.</p>
</div>


                </section>
                <section id="search_file_in_directories">
                            <input id="search_file_in_directories-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">search_file_in_directories</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">folders</span><span class="p">:</span> <span class="nb">list</span>, </span><span class="param"><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="search_file_in_directories-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#search_file_in_directories"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="search_file_in_directories-37"><a href="#search_file_in_directories-37"><span class="linenos">37</span></a><span class="k">def</span> <span class="nf">search_file_in_directories</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">folders</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="search_file_in_directories-38"><a href="#search_file_in_directories-38"><span class="linenos">38</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="search_file_in_directories-39"><a href="#search_file_in_directories-39"><span class="linenos">39</span></a><span class="sd">    Searches for a file in specified directories.</span>
</span><span id="search_file_in_directories-40"><a href="#search_file_in_directories-40"><span class="linenos">40</span></a>
</span><span id="search_file_in_directories-41"><a href="#search_file_in_directories-41"><span class="linenos">41</span></a><span class="sd">    Args:</span>
</span><span id="search_file_in_directories-42"><a href="#search_file_in_directories-42"><span class="linenos">42</span></a><span class="sd">        dir_path (str): Path to the directory to search in.</span>
</span><span id="search_file_in_directories-43"><a href="#search_file_in_directories-43"><span class="linenos">43</span></a><span class="sd">        folders (list): List of folders to make the search more specific within the directory.</span>
</span><span id="search_file_in_directories-44"><a href="#search_file_in_directories-44"><span class="linenos">44</span></a><span class="sd">        filename (str): Name of the file to search for.</span>
</span><span id="search_file_in_directories-45"><a href="#search_file_in_directories-45"><span class="linenos">45</span></a>
</span><span id="search_file_in_directories-46"><a href="#search_file_in_directories-46"><span class="linenos">46</span></a><span class="sd">    Returns:</span>
</span><span id="search_file_in_directories-47"><a href="#search_file_in_directories-47"><span class="linenos">47</span></a><span class="sd">        bool: True if the file is found, False otherwise.</span>
</span><span id="search_file_in_directories-48"><a href="#search_file_in_directories-48"><span class="linenos">48</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="search_file_in_directories-49"><a href="#search_file_in_directories-49"><span class="linenos">49</span></a>    <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">folders</span><span class="p">:</span>
</span><span id="search_file_in_directories-50"><a href="#search_file_in_directories-50"><span class="linenos">50</span></a>        <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
</span><span id="search_file_in_directories-51"><a href="#search_file_in_directories-51"><span class="linenos">51</span></a>        <span class="c1"># Iterate through all files and subdirectories in the given directory</span>
</span><span id="search_file_in_directories-52"><a href="#search_file_in_directories-52"><span class="linenos">52</span></a>        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
</span><span id="search_file_in_directories-53"><a href="#search_file_in_directories-53"><span class="linenos">53</span></a>            <span class="c1"># Check if the filename exists in the current directory</span>
</span><span id="search_file_in_directories-54"><a href="#search_file_in_directories-54"><span class="linenos">54</span></a>            <span class="k">if</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}{</span><span class="n">idle_extension</span><span class="si">}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
</span><span id="search_file_in_directories-55"><a href="#search_file_in_directories-55"><span class="linenos">55</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="search_file_in_directories-56"><a href="#search_file_in_directories-56"><span class="linenos">56</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Searches for a file in specified directories.</p>

<p>Args:
    dir_path (str): Path to the directory to search in.
    folders (list): List of folders to make the search more specific within the directory.
    filename (str): Name of the file to search for.</p>

<p>Returns:
    bool: True if the file is found, False otherwise.</p>
</div>


                </section>
                <section id="has_new_version">
                            <input id="has_new_version-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">has_new_version</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">tmx_domain</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="has_new_version-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#has_new_version"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="has_new_version-59"><a href="#has_new_version-59"><span class="linenos">59</span></a><span class="k">def</span> <span class="nf">has_new_version</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tmx_domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="has_new_version-60"><a href="#has_new_version-60"><span class="linenos">60</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="has_new_version-61"><a href="#has_new_version-61"><span class="linenos">61</span></a><span class="sd">    Checks if there is a new version of a trend TMX file, where:</span>
</span><span id="has_new_version-62"><a href="#has_new_version-62"><span class="linenos">62</span></a><span class="sd">    - trend = produced in the previous cycle</span>
</span><span id="has_new_version-63"><a href="#has_new_version-63"><span class="linenos">63</span></a><span class="sd">    - new = produced in the current cycle (based on the trend above)</span>
</span><span id="has_new_version-64"><a href="#has_new_version-64"><span class="linenos">64</span></a>
</span><span id="has_new_version-65"><a href="#has_new_version-65"><span class="linenos">65</span></a><span class="sd">    Args:</span>
</span><span id="has_new_version-66"><a href="#has_new_version-66"><span class="linenos">66</span></a><span class="sd">        file_path (str): Path to the file.</span>
</span><span id="has_new_version-67"><a href="#has_new_version-67"><span class="linenos">67</span></a><span class="sd">        tmx_domain (str): Domain associated with the file.</span>
</span><span id="has_new_version-68"><a href="#has_new_version-68"><span class="linenos">68</span></a>
</span><span id="has_new_version-69"><a href="#has_new_version-69"><span class="linenos">69</span></a><span class="sd">    Returns:</span>
</span><span id="has_new_version-70"><a href="#has_new_version-70"><span class="linenos">70</span></a><span class="sd">        bool: True if a new version exists, False otherwise.</span>
</span><span id="has_new_version-71"><a href="#has_new_version-71"><span class="linenos">71</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="has_new_version-72"><a href="#has_new_version-72"><span class="linenos">72</span></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="has_new_version-73"><a href="#has_new_version-73"><span class="linenos">73</span></a>    <span class="k">if</span> <span class="n">trend_tag</span> <span class="ow">in</span> <span class="n">filename</span> <span class="ow">and</span> <span class="n">tmx_domain</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="has_new_version-74"><a href="#has_new_version-74"><span class="linenos">74</span></a>        <span class="n">new_version_fname</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">trend_tag</span><span class="p">,</span> <span class="n">new_tag</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">)</span>
</span><span id="has_new_version-75"><a href="#has_new_version-75"><span class="linenos">75</span></a>        <span class="n">folders</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tm/auto&quot;</span><span class="p">,</span> <span class="s2">&quot;tm/enforce&quot;</span><span class="p">]</span>
</span><span id="has_new_version-76"><a href="#has_new_version-76"><span class="linenos">76</span></a>        <span class="k">if</span> <span class="n">search_file_in_directories</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span> <span class="n">folders</span><span class="p">,</span> <span class="n">new_version_fname</span><span class="p">):</span>
</span><span id="has_new_version-77"><a href="#has_new_version-77"><span class="linenos">77</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="has_new_version-78"><a href="#has_new_version-78"><span class="linenos">78</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Checks if there is a new version of a trend TMX file, where:</p>

<ul>
<li>trend = produced in the previous cycle</li>
<li>new = produced in the current cycle (based on the trend above)</li>
</ul>

<p>Args:
    file_path (str): Path to the file.
    tmx_domain (str): Domain associated with the file.</p>

<p>Returns:
    bool: True if a new version exists, False otherwise.</p>
</div>


                </section>
                <section id="get_domain">
                            <input id="get_domain-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_domain</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">file</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_domain-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_domain"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_domain-81"><a href="#get_domain-81"><span class="linenos"> 81</span></a><span class="k">def</span> <span class="nf">get_domain</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_domain-82"><a href="#get_domain-82"><span class="linenos"> 82</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_domain-83"><a href="#get_domain-83"><span class="linenos"> 83</span></a><span class="sd">    Extracts the domain from a file name.</span>
</span><span id="get_domain-84"><a href="#get_domain-84"><span class="linenos"> 84</span></a>
</span><span id="get_domain-85"><a href="#get_domain-85"><span class="linenos"> 85</span></a><span class="sd">    Args:</span>
</span><span id="get_domain-86"><a href="#get_domain-86"><span class="linenos"> 86</span></a><span class="sd">        file (str): Name of the file.</span>
</span><span id="get_domain-87"><a href="#get_domain-87"><span class="linenos"> 87</span></a>
</span><span id="get_domain-88"><a href="#get_domain-88"><span class="linenos"> 88</span></a><span class="sd">    Returns:</span>
</span><span id="get_domain-89"><a href="#get_domain-89"><span class="linenos"> 89</span></a><span class="sd">        str: Domain extracted from the file name.</span>
</span><span id="get_domain-90"><a href="#get_domain-90"><span class="linenos"> 90</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_domain-91"><a href="#get_domain-91"><span class="linenos"> 91</span></a>    <span class="c1"># get file&#39;s basename if it&#39;s a path (linux specific)</span>
</span><span id="get_domain-92"><a href="#get_domain-92"><span class="linenos"> 92</span></a>    <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file</span> <span class="k">else</span> <span class="n">file</span>
</span><span id="get_domain-93"><a href="#get_domain-93"><span class="linenos"> 93</span></a>    <span class="c1"># defines the pattern to match any TMX&#39;s extension (which can be zipped or disabled, or not)</span>
</span><span id="get_domain-94"><a href="#get_domain-94"><span class="linenos"> 94</span></a>    <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;\.tmx(\.zip)?(\.idle)?$&quot;</span>
</span><span id="get_domain-95"><a href="#get_domain-95"><span class="linenos"> 95</span></a>
</span><span id="get_domain-96"><a href="#get_domain-96"><span class="linenos"> 96</span></a>    <span class="c1"># any files starting with PISA_ contain domain-specific translations</span>
</span><span id="get_domain-97"><a href="#get_domain-97"><span class="linenos"> 97</span></a>    <span class="k">if</span> <span class="n">file_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;PISA_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">file_name</span><span class="p">):</span>
</span><span id="get_domain-98"><a href="#get_domain-98"><span class="linenos"> 98</span></a>        <span class="c1"># for tmx files</span>
</span><span id="get_domain-99"><a href="#get_domain-99"><span class="linenos"> 99</span></a>        <span class="n">tentative_domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="get_domain-100"><a href="#get_domain-100"><span class="linenos">100</span></a>        <span class="k">if</span> <span class="n">tentative_domain</span> <span class="ow">in</span> <span class="n">allowed_domains</span><span class="p">[</span><span class="s2">&quot;QQS&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">tentative_domain</span> <span class="ow">in</span> <span class="n">allowed_domains</span><span class="p">[</span><span class="s2">&quot;QQA&quot;</span><span class="p">]:</span>
</span><span id="get_domain-101"><a href="#get_domain-101"><span class="linenos">101</span></a>            <span class="c1"># then it&#39;s not the domain, but the actual questionnaire</span>
</span><span id="get_domain-102"><a href="#get_domain-102"><span class="linenos">102</span></a>            <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">allowed_domains</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">tentative_domain</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>
</span><span id="get_domain-103"><a href="#get_domain-103"><span class="linenos">103</span></a>        <span class="k">return</span> <span class="n">tentative_domain</span>
</span><span id="get_domain-104"><a href="#get_domain-104"><span class="linenos">104</span></a>    <span class="c1"># any other files contain FT2025 batch-specific translations</span>
</span><span id="get_domain-105"><a href="#get_domain-105"><span class="linenos">105</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_domain-106"><a href="#get_domain-106"><span class="linenos">106</span></a>        <span class="c1"># for batch folders or batch TMs</span>
</span><span id="get_domain-107"><a href="#get_domain-107"><span class="linenos">107</span></a>        <span class="k">if</span> <span class="s2">&quot;_QQS_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span> <span class="ow">or</span> <span class="s2">&quot;_QQA_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span> <span class="c1"># CBA QQ</span>
</span><span id="get_domain-108"><a href="#get_domain-108"><span class="linenos">108</span></a>            <span class="k">return</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="get_domain-109"><a href="#get_domain-109"><span class="linenos">109</span></a>        <span class="k">elif</span> <span class="s2">&quot;_QQSP_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span> <span class="ow">or</span> <span class="s2">&quot;_QQAP_&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span> <span class="c1"># PBA QQ</span>
</span><span id="get_domain-110"><a href="#get_domain-110"><span class="linenos">110</span></a>            <span class="k">return</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>
</span><span id="get_domain-111"><a href="#get_domain-111"><span class="linenos">111</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="get_domain-112"><a href="#get_domain-112"><span class="linenos">112</span></a>            <span class="k">return</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># anything else</span>
</span></pre></div>


            <div class="docstring"><p>Extracts the domain from a file name.</p>

<p>Args:
    file (str): Name of the file.</p>

<p>Returns:
    str: Domain extracted from the file name.</p>
</div>


                </section>
                <section id="delete_file">
                            <input id="delete_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">file</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="delete_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#delete_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="delete_file-115"><a href="#delete_file-115"><span class="linenos">115</span></a><span class="k">def</span> <span class="nf">delete_file</span><span class="p">(</span><span class="n">file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="delete_file-116"><a href="#delete_file-116"><span class="linenos">116</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="delete_file-117"><a href="#delete_file-117"><span class="linenos">117</span></a><span class="sd">    Deletes a file.</span>
</span><span id="delete_file-118"><a href="#delete_file-118"><span class="linenos">118</span></a>
</span><span id="delete_file-119"><a href="#delete_file-119"><span class="linenos">119</span></a><span class="sd">    Args:</span>
</span><span id="delete_file-120"><a href="#delete_file-120"><span class="linenos">120</span></a><span class="sd">        file (str): Path to the file.</span>
</span><span id="delete_file-121"><a href="#delete_file-121"><span class="linenos">121</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="delete_file-122"><a href="#delete_file-122"><span class="linenos">122</span></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&gt;&gt;&gt; Delete </span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> !!!&quot;</span><span class="p">)</span>
</span><span id="delete_file-123"><a href="#delete_file-123"><span class="linenos">123</span></a>    <span class="c1"># file = Path(file) if isinstance(file, str) else file # only needed with unlink()</span>
</span><span id="delete_file-124"><a href="#delete_file-124"><span class="linenos">124</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="delete_file-125"><a href="#delete_file-125"><span class="linenos">125</span></a>        <span class="c1"># file.unlink()</span>
</span><span id="delete_file-126"><a href="#delete_file-126"><span class="linenos">126</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="delete_file-127"><a href="#delete_file-127"><span class="linenos">127</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> has been successfully deleted.&quot;</span><span class="p">)</span>
</span><span id="delete_file-128"><a href="#delete_file-128"><span class="linenos">128</span></a>    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="delete_file-129"><a href="#delete_file-129"><span class="linenos">129</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</span><span id="delete_file-130"><a href="#delete_file-130"><span class="linenos">130</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="delete_file-131"><a href="#delete_file-131"><span class="linenos">131</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Deletes a file.</p>

<p>Args:
    file (str): Path to the file.</p>
</div>


                </section>
                <section id="create_dir">
                            <input id="create_dir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_dir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="create_dir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#create_dir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="create_dir-134"><a href="#create_dir-134"><span class="linenos">134</span></a><span class="k">def</span> <span class="nf">create_dir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="create_dir-135"><a href="#create_dir-135"><span class="linenos">135</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="create_dir-136"><a href="#create_dir-136"><span class="linenos">136</span></a><span class="sd">    Creates a directory.</span>
</span><span id="create_dir-137"><a href="#create_dir-137"><span class="linenos">137</span></a>
</span><span id="create_dir-138"><a href="#create_dir-138"><span class="linenos">138</span></a><span class="sd">    Args:</span>
</span><span id="create_dir-139"><a href="#create_dir-139"><span class="linenos">139</span></a><span class="sd">        dir_path (str): Path to the directory.</span>
</span><span id="create_dir-140"><a href="#create_dir-140"><span class="linenos">140</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="create_dir-141"><a href="#create_dir-141"><span class="linenos">141</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="create_dir-142"><a href="#create_dir-142"><span class="linenos">142</span></a>        <span class="n">Path</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="create_dir-143"><a href="#create_dir-143"><span class="linenos">143</span></a>        <span class="c1"># print(f&quot;The folder {dir_path} and any necessary ancestors in the path have been created.&quot;)</span>
</span><span id="create_dir-144"><a href="#create_dir-144"><span class="linenos">144</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="create_dir-145"><a href="#create_dir-145"><span class="linenos">145</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates a directory.</p>

<p>Args:
    dir_path (str): Path to the directory.</p>
</div>


                </section>
                <section id="move_file">
                            <input id="move_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">move_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">orig_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">dest_path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="move_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#move_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="move_file-148"><a href="#move_file-148"><span class="linenos">148</span></a><span class="k">def</span> <span class="nf">move_file</span><span class="p">(</span><span class="n">orig_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="move_file-149"><a href="#move_file-149"><span class="linenos">149</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="move_file-150"><a href="#move_file-150"><span class="linenos">150</span></a><span class="sd">    Renames file, adding or removing the idle extension.</span>
</span><span id="move_file-151"><a href="#move_file-151"><span class="linenos">151</span></a>
</span><span id="move_file-152"><a href="#move_file-152"><span class="linenos">152</span></a><span class="sd">    Args:</span>
</span><span id="move_file-153"><a href="#move_file-153"><span class="linenos">153</span></a><span class="sd">        orig_path (str): Original path of the file.</span>
</span><span id="move_file-154"><a href="#move_file-154"><span class="linenos">154</span></a><span class="sd">        dest_path (str): Destination path.</span>
</span><span id="move_file-155"><a href="#move_file-155"><span class="linenos">155</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="move_file-156"><a href="#move_file-156"><span class="linenos">156</span></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&gt;&gt;&gt; Move </span><span class="si">{</span><span class="n">orig_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">dest_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> !!!&quot;</span><span class="p">)</span>
</span><span id="move_file-157"><a href="#move_file-157"><span class="linenos">157</span></a>    <span class="n">dir_path</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">dest_path</span><span class="p">)</span>
</span><span id="move_file-158"><a href="#move_file-158"><span class="linenos">158</span></a>    <span class="n">create_dir</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
</span><span id="move_file-159"><a href="#move_file-159"><span class="linenos">159</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="move_file-160"><a href="#move_file-160"><span class="linenos">160</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">orig_path</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">)</span>
</span><span id="move_file-161"><a href="#move_file-161"><span class="linenos">161</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> has been successfully moved.&quot;</span><span class="p">)</span>
</span><span id="move_file-162"><a href="#move_file-162"><span class="linenos">162</span></a>    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="move_file-163"><a href="#move_file-163"><span class="linenos">163</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The file </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</span><span id="move_file-164"><a href="#move_file-164"><span class="linenos">164</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="move_file-165"><a href="#move_file-165"><span class="linenos">165</span></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Renames file, adding or removing the idle extension.</p>

<p>Args:
    orig_path (str): Original path of the file.
    dest_path (str): Destination path.</p>
</div>


                </section>
                <section id="sort_ref_tmx_file_by_domain">
                            <input id="sort_ref_tmx_file_by_domain-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sort_ref_tmx_file_by_domain</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">current_domains</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="sort_ref_tmx_file_by_domain-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#sort_ref_tmx_file_by_domain"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="sort_ref_tmx_file_by_domain-168"><a href="#sort_ref_tmx_file_by_domain-168"><span class="linenos">168</span></a><span class="k">def</span> <span class="nf">sort_ref_tmx_file_by_domain</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">current_domains</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="sort_ref_tmx_file_by_domain-169"><a href="#sort_ref_tmx_file_by_domain-169"><span class="linenos">169</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="sort_ref_tmx_file_by_domain-170"><a href="#sort_ref_tmx_file_by_domain-170"><span class="linenos">170</span></a><span class="sd">    Sorts reference TMX files by domain. Reference TMs includes trend and new TMs.</span>
</span><span id="sort_ref_tmx_file_by_domain-171"><a href="#sort_ref_tmx_file_by_domain-171"><span class="linenos">171</span></a>
</span><span id="sort_ref_tmx_file_by_domain-172"><a href="#sort_ref_tmx_file_by_domain-172"><span class="linenos">172</span></a><span class="sd">    Args:</span>
</span><span id="sort_ref_tmx_file_by_domain-173"><a href="#sort_ref_tmx_file_by_domain-173"><span class="linenos">173</span></a><span class="sd">        file_path (str): Path to the TMX file.</span>
</span><span id="sort_ref_tmx_file_by_domain-174"><a href="#sort_ref_tmx_file_by_domain-174"><span class="linenos">174</span></a><span class="sd">        current_domains (list): List of current domains.</span>
</span><span id="sort_ref_tmx_file_by_domain-175"><a href="#sort_ref_tmx_file_by_domain-175"><span class="linenos">175</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="sort_ref_tmx_file_by_domain-176"><a href="#sort_ref_tmx_file_by_domain-176"><span class="linenos">176</span></a>    <span class="c1"># gets the domain of a tmx file, according to different file naming patterns</span>
</span><span id="sort_ref_tmx_file_by_domain-177"><a href="#sort_ref_tmx_file_by_domain-177"><span class="linenos">177</span></a>    <span class="n">dirty_tmx_domain</span> <span class="o">=</span> <span class="n">get_domain</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="sort_ref_tmx_file_by_domain-178"><a href="#sort_ref_tmx_file_by_domain-178"><span class="linenos">178</span></a>    <span class="n">tmx_domain</span> <span class="o">=</span> <span class="n">dirty_tmx_domain</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;CGA-&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;New&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;-New&quot;</span><span class="p">)</span>
</span><span id="sort_ref_tmx_file_by_domain-179"><a href="#sort_ref_tmx_file_by_domain-179"><span class="linenos">179</span></a>
</span><span id="sort_ref_tmx_file_by_domain-180"><a href="#sort_ref_tmx_file_by_domain-180"><span class="linenos">180</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span><span id="sort_ref_tmx_file_by_domain-181"><a href="#sort_ref_tmx_file_by_domain-181"><span class="linenos">181</span></a>
</span><span id="sort_ref_tmx_file_by_domain-182"><a href="#sort_ref_tmx_file_by_domain-182"><span class="linenos">182</span></a>        <span class="k">if</span> <span class="n">has_new_version</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">tmx_domain</span><span class="p">):</span>
</span><span id="sort_ref_tmx_file_by_domain-183"><a href="#sort_ref_tmx_file_by_domain-183"><span class="linenos">183</span></a>            <span class="c1"># disable any trend TM if it&#39;s enabled and that has a new version from the current cycle</span>
</span><span id="sort_ref_tmx_file_by_domain-184"><a href="#sort_ref_tmx_file_by_domain-184"><span class="linenos">184</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="sort_ref_tmx_file_by_domain-185"><a href="#sort_ref_tmx_file_by_domain-185"><span class="linenos">185</span></a>                <span class="n">new_file_path</span> <span class="o">=</span> <span class="n">file_path</span> <span class="o">+</span> <span class="n">idle_extension</span>
</span><span id="sort_ref_tmx_file_by_domain-186"><a href="#sort_ref_tmx_file_by_domain-186"><span class="linenos">186</span></a>                <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="sort_ref_tmx_file_by_domain-187"><a href="#sort_ref_tmx_file_by_domain-187"><span class="linenos">187</span></a>        <span class="k">elif</span> <span class="n">tmx_domain</span> <span class="ow">in</span> <span class="n">current_domains</span> <span class="ow">and</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="sort_ref_tmx_file_by_domain-188"><a href="#sort_ref_tmx_file_by_domain-188"><span class="linenos">188</span></a>            <span class="c1"># enables the TM if it&#39;s disabled but matches any of the current domains in the  project</span>
</span><span id="sort_ref_tmx_file_by_domain-189"><a href="#sort_ref_tmx_file_by_domain-189"><span class="linenos">189</span></a>            <span class="n">new_file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">)</span>
</span><span id="sort_ref_tmx_file_by_domain-190"><a href="#sort_ref_tmx_file_by_domain-190"><span class="linenos">190</span></a>            <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="sort_ref_tmx_file_by_domain-191"><a href="#sort_ref_tmx_file_by_domain-191"><span class="linenos">191</span></a>        <span class="k">elif</span> <span class="n">tmx_domain</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_domains</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="sort_ref_tmx_file_by_domain-192"><a href="#sort_ref_tmx_file_by_domain-192"><span class="linenos">192</span></a>            <span class="c1"># disables the TM if it&#39;s enabled but does not match any of the current domains in the  project</span>
</span><span id="sort_ref_tmx_file_by_domain-193"><a href="#sort_ref_tmx_file_by_domain-193"><span class="linenos">193</span></a>            <span class="n">new_file_path</span> <span class="o">=</span> <span class="n">file_path</span> <span class="o">+</span> <span class="n">idle_extension</span>
</span><span id="sort_ref_tmx_file_by_domain-194"><a href="#sort_ref_tmx_file_by_domain-194"><span class="linenos">194</span></a>            <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="sort_ref_tmx_file_by_domain-195"><a href="#sort_ref_tmx_file_by_domain-195"><span class="linenos">195</span></a>        <span class="k">elif</span> <span class="n">tmx_domain</span> <span class="ow">in</span> <span class="n">disallowed_domains</span><span class="p">:</span>
</span><span id="sort_ref_tmx_file_by_domain-196"><a href="#sort_ref_tmx_file_by_domain-196"><span class="linenos">196</span></a>            <span class="c1"># remove the file for good</span>
</span><span id="sort_ref_tmx_file_by_domain-197"><a href="#sort_ref_tmx_file_by_domain-197"><span class="linenos">197</span></a>            <span class="n">delete_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sorts reference TMX files by domain. Reference TMs includes trend and new TMs.</p>

<p>Args:
    file_path (str): Path to the TMX file.
    current_domains (list): List of current domains.</p>
</div>


                </section>
                <section id="get_batch_from_filename">
                            <input id="get_batch_from_filename-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_batch_from_filename</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_batch_from_filename-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_batch_from_filename"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_batch_from_filename-200"><a href="#get_batch_from_filename-200"><span class="linenos">200</span></a><span class="k">def</span> <span class="nf">get_batch_from_filename</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_batch_from_filename-201"><a href="#get_batch_from_filename-201"><span class="linenos">201</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_batch_from_filename-202"><a href="#get_batch_from_filename-202"><span class="linenos">202</span></a><span class="sd">    Extracts the batch from a file name.</span>
</span><span id="get_batch_from_filename-203"><a href="#get_batch_from_filename-203"><span class="linenos">203</span></a>
</span><span id="get_batch_from_filename-204"><a href="#get_batch_from_filename-204"><span class="linenos">204</span></a><span class="sd">    Args:</span>
</span><span id="get_batch_from_filename-205"><a href="#get_batch_from_filename-205"><span class="linenos">205</span></a><span class="sd">        file_path (str): Path to the file.</span>
</span><span id="get_batch_from_filename-206"><a href="#get_batch_from_filename-206"><span class="linenos">206</span></a>
</span><span id="get_batch_from_filename-207"><a href="#get_batch_from_filename-207"><span class="linenos">207</span></a><span class="sd">    Returns:</span>
</span><span id="get_batch_from_filename-208"><a href="#get_batch_from_filename-208"><span class="linenos">208</span></a><span class="sd">        str: Batch extracted from the file name.</span>
</span><span id="get_batch_from_filename-209"><a href="#get_batch_from_filename-209"><span class="linenos">209</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_batch_from_filename-210"><a href="#get_batch_from_filename-210"><span class="linenos">210</span></a>    <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">file_path</span> <span class="k">else</span> <span class="n">file_path</span>
</span><span id="get_batch_from_filename-211"><a href="#get_batch_from_filename-211"><span class="linenos">211</span></a>    <span class="n">basename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="get_batch_from_filename-212"><a href="#get_batch_from_filename-212"><span class="linenos">212</span></a>
</span><span id="get_batch_from_filename-213"><a href="#get_batch_from_filename-213"><span class="linenos">213</span></a>    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">basename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">locales</span><span class="p">):</span>
</span><span id="get_batch_from_filename-214"><a href="#get_batch_from_filename-214"><span class="linenos">214</span></a>        <span class="c1"># this is a base TM, hence remove language code</span>
</span><span id="get_batch_from_filename-215"><a href="#get_batch_from_filename-215"><span class="linenos">215</span></a>        <span class="k">return</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="get_batch_from_filename-216"><a href="#get_batch_from_filename-216"><span class="linenos">216</span></a>    <span class="k">return</span> <span class="n">basename</span>
</span></pre></div>


            <div class="docstring"><p>Extracts the batch from a file name.</p>

<p>Args:
    file_path (str): Path to the file.</p>

<p>Returns:
    str: Batch extracted from the file name.</p>
</div>


                </section>
                <section id="sort_batch_tmx_file_by_batch">
                            <input id="sort_batch_tmx_file_by_batch-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sort_batch_tmx_file_by_batch</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">batches</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="sort_batch_tmx_file_by_batch-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#sort_batch_tmx_file_by_batch"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="sort_batch_tmx_file_by_batch-219"><a href="#sort_batch_tmx_file_by_batch-219"><span class="linenos">219</span></a><span class="k">def</span> <span class="nf">sort_batch_tmx_file_by_batch</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">batches</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="sort_batch_tmx_file_by_batch-220"><a href="#sort_batch_tmx_file_by_batch-220"><span class="linenos">220</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="sort_batch_tmx_file_by_batch-221"><a href="#sort_batch_tmx_file_by_batch-221"><span class="linenos">221</span></a><span class="sd">    Sorts batch TMX files by batch. </span>
</span><span id="sort_batch_tmx_file_by_batch-222"><a href="#sort_batch_tmx_file_by_batch-222"><span class="linenos">222</span></a>
</span><span id="sort_batch_tmx_file_by_batch-223"><a href="#sort_batch_tmx_file_by_batch-223"><span class="linenos">223</span></a><span class="sd">    Input can be:</span>
</span><span id="sort_batch_tmx_file_by_batch-224"><a href="#sort_batch_tmx_file_by_batch-224"><span class="linenos">224</span></a><span class="sd">    </span>
</span><span id="sort_batch_tmx_file_by_batch-225"><a href="#sort_batch_tmx_file_by_batch-225"><span class="linenos">225</span></a><span class="sd">    - Batch TMs, which may come from the previous or the next step. </span>
</span><span id="sort_batch_tmx_file_by_batch-226"><a href="#sort_batch_tmx_file_by_batch-226"><span class="linenos">226</span></a><span class="sd">    - Base TMs (used for borrowing), which come from an advanced step in another workflow. </span>
</span><span id="sort_batch_tmx_file_by_batch-227"><a href="#sort_batch_tmx_file_by_batch-227"><span class="linenos">227</span></a><span class="sd">    </span>
</span><span id="sort_batch_tmx_file_by_batch-228"><a href="#sort_batch_tmx_file_by_batch-228"><span class="linenos">228</span></a><span class="sd">    The basename of batch TMs (after removing the extension) is already the batch name. </span>
</span><span id="sort_batch_tmx_file_by_batch-229"><a href="#sort_batch_tmx_file_by_batch-229"><span class="linenos">229</span></a><span class="sd">    The basename of base TMs is a concatenation of the batch name and the locale, so both the </span>
</span><span id="sort_batch_tmx_file_by_batch-230"><a href="#sort_batch_tmx_file_by_batch-230"><span class="linenos">230</span></a><span class="sd">    local and the extension need to be removed.</span>
</span><span id="sort_batch_tmx_file_by_batch-231"><a href="#sort_batch_tmx_file_by_batch-231"><span class="linenos">231</span></a>
</span><span id="sort_batch_tmx_file_by_batch-232"><a href="#sort_batch_tmx_file_by_batch-232"><span class="linenos">232</span></a><span class="sd">    Args:</span>
</span><span id="sort_batch_tmx_file_by_batch-233"><a href="#sort_batch_tmx_file_by_batch-233"><span class="linenos">233</span></a><span class="sd">        file_path (str): Path to the TMX file.</span>
</span><span id="sort_batch_tmx_file_by_batch-234"><a href="#sort_batch_tmx_file_by_batch-234"><span class="linenos">234</span></a><span class="sd">        batches (list): List of batches.</span>
</span><span id="sort_batch_tmx_file_by_batch-235"><a href="#sort_batch_tmx_file_by_batch-235"><span class="linenos">235</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="sort_batch_tmx_file_by_batch-236"><a href="#sort_batch_tmx_file_by_batch-236"><span class="linenos">236</span></a>    <span class="n">batch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">get_batch_from_filename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="sort_batch_tmx_file_by_batch-237"><a href="#sort_batch_tmx_file_by_batch-237"><span class="linenos">237</span></a>
</span><span id="sort_batch_tmx_file_by_batch-238"><a href="#sort_batch_tmx_file_by_batch-238"><span class="linenos">238</span></a>    <span class="k">if</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span> <span class="ow">and</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="sort_batch_tmx_file_by_batch-239"><a href="#sort_batch_tmx_file_by_batch-239"><span class="linenos">239</span></a>        <span class="c1"># remove penalty</span>
</span><span id="sort_batch_tmx_file_by_batch-240"><a href="#sort_batch_tmx_file_by_batch-240"><span class="linenos">240</span></a>        <span class="n">new_file_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">)</span>
</span><span id="sort_batch_tmx_file_by_batch-241"><a href="#sort_batch_tmx_file_by_batch-241"><span class="linenos">241</span></a>        <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span><span id="sort_batch_tmx_file_by_batch-242"><a href="#sort_batch_tmx_file_by_batch-242"><span class="linenos">242</span></a>    <span class="k">elif</span> <span class="n">batch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">batches</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">idle_extension</span><span class="p">):</span>
</span><span id="sort_batch_tmx_file_by_batch-243"><a href="#sort_batch_tmx_file_by_batch-243"><span class="linenos">243</span></a>        <span class="c1"># add penalty</span>
</span><span id="sort_batch_tmx_file_by_batch-244"><a href="#sort_batch_tmx_file_by_batch-244"><span class="linenos">244</span></a>        <span class="n">new_file_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_path</span> <span class="o">+</span> <span class="n">idle_extension</span>
</span><span id="sort_batch_tmx_file_by_batch-245"><a href="#sort_batch_tmx_file_by_batch-245"><span class="linenos">245</span></a>        <span class="n">move_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">new_file_path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sorts batch TMX files by batch. </p>

<p>Input can be:</p>

<ul>
<li>Batch TMs, which may come from the previous or the next step. </li>
<li>Base TMs (used for borrowing), which come from an advanced step in another workflow. </li>
</ul>

<p>The basename of batch TMs (after removing the extension) is already the batch name. 
The basename of base TMs is a concatenation of the batch name and the locale, so both the 
local and the extension need to be removed.</p>

<p>Args:
    file_path (str): Path to the TMX file.
    batches (list): List of batches.</p>
</div>


                </section>
                <section id="get_tmx_files">
                            <input id="get_tmx_files-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_tmx_files</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">tm_dir</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">origin_dirs</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="get_tmx_files-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_tmx_files"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_tmx_files-248"><a href="#get_tmx_files-248"><span class="linenos">248</span></a><span class="k">def</span> <span class="nf">get_tmx_files</span><span class="p">(</span><span class="n">tm_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">origin_dirs</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="get_tmx_files-249"><a href="#get_tmx_files-249"><span class="linenos">249</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_tmx_files-250"><a href="#get_tmx_files-250"><span class="linenos">250</span></a><span class="sd">    Gets TMX files from specified directories.</span>
</span><span id="get_tmx_files-251"><a href="#get_tmx_files-251"><span class="linenos">251</span></a>
</span><span id="get_tmx_files-252"><a href="#get_tmx_files-252"><span class="linenos">252</span></a><span class="sd">    Args:</span>
</span><span id="get_tmx_files-253"><a href="#get_tmx_files-253"><span class="linenos">253</span></a><span class="sd">        tm_dir (str): Path to the TM directory.</span>
</span><span id="get_tmx_files-254"><a href="#get_tmx_files-254"><span class="linenos">254</span></a><span class="sd">        origin_dirs (list): List of directories to search in.</span>
</span><span id="get_tmx_files-255"><a href="#get_tmx_files-255"><span class="linenos">255</span></a>
</span><span id="get_tmx_files-256"><a href="#get_tmx_files-256"><span class="linenos">256</span></a><span class="sd">    Returns:</span>
</span><span id="get_tmx_files-257"><a href="#get_tmx_files-257"><span class="linenos">257</span></a><span class="sd">        list: List of paths to TMX files.</span>
</span><span id="get_tmx_files-258"><a href="#get_tmx_files-258"><span class="linenos">258</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_tmx_files-259"><a href="#get_tmx_files-259"><span class="linenos">259</span></a>    <span class="c1"># finds files inside the TM dir having any of the specified origin folders in the file path</span>
</span><span id="get_tmx_files-260"><a href="#get_tmx_files-260"><span class="linenos">260</span></a>    <span class="c1"># &#39;origin&#39; here means where the TM came from, e.g. previous step, previous cycle, another locale, etc.</span>
</span><span id="get_tmx_files-261"><a href="#get_tmx_files-261"><span class="linenos">261</span></a>    <span class="n">files</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tm_dir</span><span class="si">}</span><span class="s2">/**/</span><span class="si">{</span><span class="n">origin_dir</span><span class="si">}</span><span class="s2">/*.tmx*&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">origin_dir</span> <span class="ow">in</span> <span class="n">origin_dirs</span><span class="p">]</span>
</span><span id="get_tmx_files-262"><a href="#get_tmx_files-262"><span class="linenos">262</span></a>    <span class="c1"># it flattens the list of files before returning it</span>
</span><span id="get_tmx_files-263"><a href="#get_tmx_files-263"><span class="linenos">263</span></a>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">files</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Gets TMX files from specified directories.</p>

<p>Args:
    tm_dir (str): Path to the TM directory.
    origin_dirs (list): List of directories to search in.</p>

<p>Returns:
    list: List of paths to TMX files.</p>
</div>


                </section>
                <section id="get_batch_domains">
                            <input id="get_batch_domains-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_batch_domains</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">batches</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="get_batch_domains-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_batch_domains"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_batch_domains-266"><a href="#get_batch_domains-266"><span class="linenos">266</span></a><span class="k">def</span> <span class="nf">get_batch_domains</span><span class="p">(</span><span class="n">batches</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="get_batch_domains-267"><a href="#get_batch_domains-267"><span class="linenos">267</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_batch_domains-268"><a href="#get_batch_domains-268"><span class="linenos">268</span></a><span class="sd">    Gets domains associated with batches (one domain per batch).</span>
</span><span id="get_batch_domains-269"><a href="#get_batch_domains-269"><span class="linenos">269</span></a>
</span><span id="get_batch_domains-270"><a href="#get_batch_domains-270"><span class="linenos">270</span></a><span class="sd">    Args:</span>
</span><span id="get_batch_domains-271"><a href="#get_batch_domains-271"><span class="linenos">271</span></a><span class="sd">        batches (list): List of batches.</span>
</span><span id="get_batch_domains-272"><a href="#get_batch_domains-272"><span class="linenos">272</span></a>
</span><span id="get_batch_domains-273"><a href="#get_batch_domains-273"><span class="linenos">273</span></a><span class="sd">    Returns:</span>
</span><span id="get_batch_domains-274"><a href="#get_batch_domains-274"><span class="linenos">274</span></a><span class="sd">        list: List of domains associated with the batches.</span>
</span><span id="get_batch_domains-275"><a href="#get_batch_domains-275"><span class="linenos">275</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_batch_domains-276"><a href="#get_batch_domains-276"><span class="linenos">276</span></a>    <span class="c1"># return [get_domain(batch) for batch in batches]</span>
</span><span id="get_batch_domains-277"><a href="#get_batch_domains-277"><span class="linenos">277</span></a>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">get_domain</span><span class="p">,</span> <span class="n">batches</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Gets domains associated with batches (one domain per batch).</p>

<p>Args:
    batches (list): List of batches.</p>

<p>Returns:
    list: List of domains associated with the batches.</p>
</div>


                </section>
                <section id="get_mapped_batches">
                            <input id="get_mapped_batches-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_mapped_batches</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">root_dir_path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="get_mapped_batches-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_mapped_batches"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_mapped_batches-280"><a href="#get_mapped_batches-280"><span class="linenos">280</span></a><span class="k">def</span> <span class="nf">get_mapped_batches</span><span class="p">(</span><span class="n">root_dir_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="get_mapped_batches-281"><a href="#get_mapped_batches-281"><span class="linenos">281</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_mapped_batches-282"><a href="#get_mapped_batches-282"><span class="linenos">282</span></a><span class="sd">    Gets mapped batches from repository mappings in the omegat project settings.</span>
</span><span id="get_mapped_batches-283"><a href="#get_mapped_batches-283"><span class="linenos">283</span></a>
</span><span id="get_mapped_batches-284"><a href="#get_mapped_batches-284"><span class="linenos">284</span></a><span class="sd">    Args:</span>
</span><span id="get_mapped_batches-285"><a href="#get_mapped_batches-285"><span class="linenos">285</span></a><span class="sd">        root_dir_path (str): Path to the root directory of the project.</span>
</span><span id="get_mapped_batches-286"><a href="#get_mapped_batches-286"><span class="linenos">286</span></a>
</span><span id="get_mapped_batches-287"><a href="#get_mapped_batches-287"><span class="linenos">287</span></a><span class="sd">    Returns:</span>
</span><span id="get_mapped_batches-288"><a href="#get_mapped_batches-288"><span class="linenos">288</span></a><span class="sd">        list: List of mapped batches.</span>
</span><span id="get_mapped_batches-289"><a href="#get_mapped_batches-289"><span class="linenos">289</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_mapped_batches-290"><a href="#get_mapped_batches-290"><span class="linenos">290</span></a>    <span class="c1"># extracts the whole content of the project settings file</span>
</span><span id="get_mapped_batches-291"><a href="#get_mapped_batches-291"><span class="linenos">291</span></a>    <span class="n">settings_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir_path</span><span class="p">,</span> <span class="s2">&quot;omegat.project&quot;</span><span class="p">)</span>
</span><span id="get_mapped_batches-292"><a href="#get_mapped_batches-292"><span class="linenos">292</span></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">settings_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="get_mapped_batches-293"><a href="#get_mapped_batches-293"><span class="linenos">293</span></a>        <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="get_mapped_batches-294"><a href="#get_mapped_batches-294"><span class="linenos">294</span></a>    <span class="n">bs_content</span><span class="p">:</span> <span class="n">BeautifulSoup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s2">&quot;xml&quot;</span><span class="p">)</span>
</span><span id="get_mapped_batches-295"><a href="#get_mapped_batches-295"><span class="linenos">295</span></a>
</span><span id="get_mapped_batches-296"><a href="#get_mapped_batches-296"><span class="linenos">296</span></a>    <span class="c1"># extracts the mapping elements where the value of the &#39;local&#39; attribute start with &#39;source&#39;</span>
</span><span id="get_mapped_batches-297"><a href="#get_mapped_batches-297"><span class="linenos">297</span></a>    <span class="n">mappings</span><span class="p">:</span> <span class="n">BeautifulSoup</span><span class="o">.</span><span class="n">element_classes</span> <span class="o">=</span> <span class="n">bs_content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;mapping&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;local&#39;</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^source&quot;</span><span class="p">)})</span>
</span><span id="get_mapped_batches-298"><a href="#get_mapped_batches-298"><span class="linenos">298</span></a>    <span class="c1"># for every mapping, returns the part of the value after &#39;source/&#39;, i.e. the batch name</span>
</span><span id="get_mapped_batches-299"><a href="#get_mapped_batches-299"><span class="linenos">299</span></a>    <span class="k">return</span> <span class="p">[</span><span class="n">mapping</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;local&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">mapping</span> <span class="ow">in</span> <span class="n">mappings</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Gets mapped batches from repository mappings in the omegat project settings.</p>

<p>Args:
    root_dir_path (str): Path to the root directory of the project.</p>

<p>Returns:
    list: List of mapped batches.</p>
</div>


                </section>
    </main>
</body>
</html>